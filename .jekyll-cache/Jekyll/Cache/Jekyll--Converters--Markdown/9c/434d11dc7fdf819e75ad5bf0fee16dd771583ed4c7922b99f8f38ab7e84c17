I"-¼<p>TworzÄ…c komponenty w Angularze mamy moÅ¼liwoÅ›Ä‡ zarzÄ…dzania kapsuÅ‚kowaniem (enkapsulacjÄ…) stylÃ³w - czyli tym jak style z jednego komponentu wpÅ‚ywajÄ… na inne komponenty.<br />
Zanim omÃ³wimy kapsuÅ‚kowanie, wyjaÅ›nijmy w kilku sÅ‚owach czym jest <strong>Shadow DOM</strong>.</p>

<h2 id="shadow-dom">Shadow DOM</h2>

<p>Shadow DOM wprowadza kapsuÅ‚kowanie do DOM-u. Pozwala to odseparowaÄ‡ styl i kod potrzebny do wyÅ›wietlenia elementu od dokumentu, w ktÃ³rym siÄ™ znajduje. PrzykÅ‚adem moÅ¼e byÄ‡ np. element HTML <code class="language-plaintext highlighter-rouge">&lt;video&gt;</code></p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;video</span> <span class="na">width=</span><span class="s">"320"</span> <span class="na">height=</span><span class="s">"240"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;source</span> <span class="na">src=</span><span class="s">"movie.mp4"</span> <span class="na">type=</span><span class="s">"video/mp4"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;source</span> <span class="na">src=</span><span class="s">"movie.ogg"</span> <span class="na">type=</span><span class="s">"video/ogg"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/video&gt;</span>
</code></pre></div></div>

<p>Po wÅ‚Ä…czeniu opcji wyÅ›wietlania Shadow Root w przeglÄ…darce (na przykÅ‚adzie Google Chrome):<br />
<img src="/assets/img/posts/2019-08-22-view-encapsulation-w-angularze/devtools_config_shadow_dom.jpg" alt="Devtools Configuration" />
<span class="img-legend">DevTools &gt; Settings &gt; Preferences &gt; Elements</span></p>

<p>moÅ¼emy zobaczyÄ‡ z czego tak naprawdÄ™ skÅ‚ada siÄ™ element <code class="language-plaintext highlighter-rouge">&lt;video&gt;</code>:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;video</span> <span class="na">width=</span><span class="s">"320"</span> <span class="na">height=</span><span class="s">"240"</span><span class="nt">&gt;</span>
    #shadow-root
        <span class="nt">&lt;div</span> <span class="na">pseudo=</span><span class="s">"-webkit-media-controls"</span> <span class="na">class=</span><span class="s">"sizing-small phase-ready state-stopped"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">pseudo=</span><span class="s">"-internal-media-controls-loading-panel"</span> <span class="na">aria-label=</span><span class="s">"buforowanie"</span> <span class="na">aria-live=</span><span class="s">"polite"</span>
                <span class="na">style=</span><span class="s">"display: none;"</span><span class="nt">&gt;&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">pseudo=</span><span class="s">"-webkit-media-controls-overlay-enclosure"</span><span class="nt">&gt;&lt;input</span>
                    <span class="na">pseudo=</span><span class="s">"-internal-media-controls-overlay-cast-button"</span> <span class="na">type=</span><span class="s">"button"</span>
                    <span class="na">aria-label=</span><span class="s">"odtwarzanie na urzÄ…dzeniu zdalnym"</span> <span class="na">style=</span><span class="s">"display: none;"</span><span class="nt">&gt;&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">pseudo=</span><span class="s">"-webkit-media-controls-enclosure"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">pseudo=</span><span class="s">"-webkit-media-controls-panel"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">pseudo=</span><span class="s">"-internal-media-controls-scrubbing-message"</span> <span class="na">style=</span><span class="s">"display: none;"</span><span class="nt">&gt;&lt;/div&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">pseudo=</span><span class="s">"-internal-media-controls-button-panel"</span><span class="nt">&gt;&lt;input</span> <span class="na">type=</span><span class="s">"button"</span>
                            <span class="na">pseudo=</span><span class="s">"-webkit-media-controls-play-button"</span> <span class="na">aria-label=</span><span class="s">"odtwÃ³rz"</span> <span class="na">class=</span><span class="s">"pause"</span> <span class="na">style=</span><span class="s">""</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">aria-label=</span><span class="s">"upÅ‚ynÄ™Å‚o: 0:00"</span> <span class="na">pseudo=</span><span class="s">"-webkit-media-controls-current-time-display"</span> <span class="na">style=</span><span class="s">""</span><span class="nt">&gt;</span>0:00
                        <span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">aria-label=</span><span class="s">"pozostaÅ‚o: / 0:12"</span> <span class="na">pseudo=</span><span class="s">"-webkit-media-controls-time-remaining-display"</span> <span class="na">style=</span><span class="s">""</span><span class="nt">&gt;</span>
                            /
                            0:12<span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">pseudo=</span><span class="s">"-internal-media-controls-button-spacer"</span><span class="nt">&gt;&lt;/div&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">pseudo=</span><span class="s">"-webkit-media-controls-volume-control-container"</span> <span class="na">class=</span><span class="s">"closed"</span> <span class="na">style=</span><span class="s">""</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">pseudo=</span><span class="s">"-webkit-media-controls-volume-control-hover-background"</span><span class="nt">&gt;&lt;/div&gt;&lt;input</span> <span class="na">type=</span><span class="s">"range"</span>
                                <span class="na">step=</span><span class="s">"any"</span> <span class="na">max=</span><span class="s">"1"</span> <span class="na">aria-valuemax=</span><span class="s">"100"</span> <span class="na">aria-valuemin=</span><span class="s">"0"</span> <span class="na">aria-label=</span><span class="s">"volume"</span>
                                <span class="na">pseudo=</span><span class="s">"-webkit-media-controls-volume-slider"</span> <span class="na">aria-valuenow=</span><span class="s">"100"</span> <span class="na">class=</span><span class="s">"closed"</span>
                                <span class="na">style=</span><span class="s">""</span><span class="nt">&gt;&lt;input</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">pseudo=</span><span class="s">"-webkit-media-controls-mute-button"</span>
                                <span class="na">aria-label=</span><span class="s">"wyciszenie"</span> <span class="na">style=</span><span class="s">""</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;/div&gt;&lt;input</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">role=</span><span class="s">"button"</span> <span class="na">aria-label=</span><span class="s">"wÅ‚Ä…cz tryb obrazu w&amp;nbsp;obrazie"</span>
                            <span class="na">pseudo=</span><span class="s">"-internal-media-controls-picture-in-picture-button"</span> <span class="na">style=</span><span class="s">"display: none;"</span><span class="nt">&gt;&lt;input</span>
                            <span class="na">type=</span><span class="s">"button"</span> <span class="na">pseudo=</span><span class="s">"-webkit-media-controls-fullscreen-button"</span>
                            <span class="na">aria-label=</span><span class="s">"przejdÅº do peÅ‚nego ekranu"</span> <span class="na">style=</span><span class="s">""</span><span class="nt">&gt;&lt;input</span> <span class="na">type=</span><span class="s">"button"</span>
                            <span class="na">aria-label=</span><span class="s">"pokaÅ¼ wiÄ™cej opcji sterowania multimediami"</span> <span class="na">title=</span><span class="s">"wiÄ™cej opcji"</span>
                            <span class="na">pseudo=</span><span class="s">"-internal-media-controls-overflow-button"</span> <span class="na">style=</span><span class="s">""</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;/div&gt;&lt;input</span> <span class="na">type=</span><span class="s">"range"</span> <span class="na">step=</span><span class="s">"any"</span> <span class="na">pseudo=</span><span class="s">"-webkit-media-controls-timeline"</span> <span class="na">max=</span><span class="s">"12.612"</span>
                        <span class="na">aria-label=</span><span class="s">"pasek czasu odtwarzania filmu 0:00 / 0:12"</span> <span class="na">aria-valuetext=</span><span class="s">"upÅ‚ynÄ™Å‚o: 0:00"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">role=</span><span class="s">"menu"</span> <span class="na">aria-label=</span><span class="s">"Opcje"</span> <span class="na">pseudo=</span><span class="s">"-internal-media-controls-text-track-list"</span> <span class="na">style=</span><span class="s">"display: none;"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">pseudo=</span><span class="s">"-internal-media-controls-overflow-menu-list"</span> <span class="na">role=</span><span class="s">"menu"</span> <span class="na">class=</span><span class="s">"closed"</span> <span class="na">style=</span><span class="s">"display: none;"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;label</span> <span class="na">pseudo=</span><span class="s">"-internal-media-controls-overflow-menu-list-item"</span> <span class="na">role=</span><span class="s">"menuitem"</span> <span class="na">tabindex=</span><span class="s">"0"</span>
                    <span class="na">aria-label=</span><span class="s">" OdtwÃ³rz "</span> <span class="na">style=</span><span class="s">"display: none;"</span><span class="nt">&gt;&lt;input</span> <span class="na">type=</span><span class="s">"button"</span>
                        <span class="na">pseudo=</span><span class="s">"-webkit-media-controls-play-button"</span> <span class="na">tabindex=</span><span class="s">"-1"</span> <span class="na">aria-label=</span><span class="s">"odtwÃ³rz"</span> <span class="na">class=</span><span class="s">"pause"</span>
                        <span class="na">style=</span><span class="s">"display: none;"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">aria-hidden=</span><span class="s">"true"</span><span class="nt">&gt;&lt;span&gt;</span>OdtwÃ³rz<span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
                <span class="nt">&lt;/label&gt;&lt;label</span> <span class="na">pseudo=</span><span class="s">"-internal-media-controls-overflow-menu-list-item"</span> <span class="na">role=</span><span class="s">"menuitem"</span> <span class="na">tabindex=</span><span class="s">"0"</span>
                    <span class="na">aria-label=</span><span class="s">"przejdÅº do peÅ‚nego ekranu PeÅ‚ny ekran "</span> <span class="na">style=</span><span class="s">"display: none;"</span><span class="nt">&gt;&lt;input</span> <span class="na">type=</span><span class="s">"button"</span>
                        <span class="na">pseudo=</span><span class="s">"-webkit-media-controls-fullscreen-button"</span> <span class="na">aria-label=</span><span class="s">"przejdÅº do peÅ‚nego ekranu"</span>
                        <span class="na">tabindex=</span><span class="s">"-1"</span> <span class="na">style=</span><span class="s">"display: none;"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">aria-hidden=</span><span class="s">"true"</span><span class="nt">&gt;&lt;span&gt;</span>PeÅ‚ny ekran<span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
                <span class="nt">&lt;/label&gt;&lt;label</span> <span class="na">pseudo=</span><span class="s">"-internal-media-controls-overflow-menu-list-item"</span> <span class="na">role=</span><span class="s">"menuitem"</span> <span class="na">tabindex=</span><span class="s">"0"</span>
                    <span class="na">aria-label=</span><span class="s">"pobierz multimedia Pobierz "</span> <span class="na">class=</span><span class="s">"animated-1"</span> <span class="na">style=</span><span class="s">""</span><span class="nt">&gt;&lt;input</span> <span class="na">type=</span><span class="s">"button"</span>
                        <span class="na">aria-label=</span><span class="s">"pobierz multimedia"</span> <span class="na">pseudo=</span><span class="s">"-internal-media-controls-download-button"</span> <span class="na">tabindex=</span><span class="s">"-1"</span>
                        <span class="na">style=</span><span class="s">""</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">aria-hidden=</span><span class="s">"true"</span><span class="nt">&gt;&lt;span&gt;</span>Pobierz<span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
                <span class="nt">&lt;/label&gt;&lt;label</span> <span class="na">pseudo=</span><span class="s">"-internal-media-controls-overflow-menu-list-item"</span> <span class="na">role=</span><span class="s">"menuitem"</span> <span class="na">tabindex=</span><span class="s">"0"</span>
                    <span class="na">aria-label=</span><span class="s">" Wycisz "</span> <span class="na">class=</span><span class="s">"animated-2"</span> <span class="na">style=</span><span class="s">"display: none;"</span><span class="nt">&gt;&lt;input</span> <span class="na">type=</span><span class="s">"button"</span>
                        <span class="na">pseudo=</span><span class="s">"-webkit-media-controls-mute-button"</span> <span class="na">tabindex=</span><span class="s">"-1"</span> <span class="na">aria-label=</span><span class="s">"wyciszenie"</span>
                        <span class="na">style=</span><span class="s">"display: none;"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">aria-hidden=</span><span class="s">"true"</span><span class="nt">&gt;&lt;span&gt;</span>Wycisz<span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
                <span class="nt">&lt;/label&gt;&lt;label</span> <span class="na">pseudo=</span><span class="s">"-internal-media-controls-overflow-menu-list-item"</span> <span class="na">role=</span><span class="s">"menuitem"</span> <span class="na">tabindex=</span><span class="s">"0"</span>
                    <span class="na">aria-label=</span><span class="s">"odtwarzanie na urzÄ…dzeniu zdalnym PrzesyÅ‚aj "</span> <span class="na">class=</span><span class="s">"animated-1"</span>
                    <span class="na">style=</span><span class="s">"display: none;"</span><span class="nt">&gt;&lt;input</span> <span class="na">pseudo=</span><span class="s">"-internal-media-controls-cast-button"</span> <span class="na">type=</span><span class="s">"button"</span>
                        <span class="na">aria-label=</span><span class="s">"odtwarzanie na urzÄ…dzeniu zdalnym"</span> <span class="na">tabindex=</span><span class="s">"-1"</span> <span class="na">style=</span><span class="s">"display: none;"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">aria-hidden=</span><span class="s">"true"</span><span class="nt">&gt;&lt;span&gt;</span>PrzesyÅ‚aj<span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
                <span class="nt">&lt;/label&gt;&lt;label</span> <span class="na">pseudo=</span><span class="s">"-internal-media-controls-overflow-menu-list-item"</span> <span class="na">role=</span><span class="s">"menuitem"</span> <span class="na">tabindex=</span><span class="s">"0"</span>
                    <span class="na">aria-label=</span><span class="s">"wyÅ›wietlanie menu napisÃ³w Napisy "</span> <span class="na">class=</span><span class="s">"animated-0"</span> <span class="na">style=</span><span class="s">"display: none;"</span><span class="nt">&gt;&lt;input</span>
                        <span class="na">aria-label=</span><span class="s">"wyÅ›wietlanie menu napisÃ³w"</span> <span class="na">type=</span><span class="s">"button"</span>
                        <span class="na">pseudo=</span><span class="s">"-webkit-media-controls-toggle-closed-captions-button"</span> <span class="na">tabindex=</span><span class="s">"-1"</span> <span class="na">style=</span><span class="s">"display: none;"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">aria-hidden=</span><span class="s">"true"</span><span class="nt">&gt;&lt;span&gt;</span>Napisy<span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
                <span class="nt">&lt;/label&gt;&lt;label</span> <span class="na">pseudo=</span><span class="s">"-internal-media-controls-overflow-menu-list-item"</span> <span class="na">role=</span><span class="s">"menuitem"</span> <span class="na">tabindex=</span><span class="s">"0"</span>
                    <span class="na">aria-label=</span><span class="s">"wÅ‚Ä…cz tryb obrazu w&amp;nbsp;obrazie Obraz w&amp;nbsp;obrazie "</span> <span class="na">class=</span><span class="s">"animated-0"</span> <span class="na">style=</span><span class="s">""</span><span class="nt">&gt;&lt;input</span>
                        <span class="na">type=</span><span class="s">"button"</span> <span class="na">role=</span><span class="s">"button"</span> <span class="na">aria-label=</span><span class="s">"wÅ‚Ä…cz tryb obrazu w&amp;nbsp;obrazie"</span>
                        <span class="na">pseudo=</span><span class="s">"-internal-media-controls-picture-in-picture-button"</span> <span class="na">tabindex=</span><span class="s">"-1"</span> <span class="na">style=</span><span class="s">""</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">aria-hidden=</span><span class="s">"true"</span><span class="nt">&gt;&lt;span&gt;</span>Obraz w<span class="ni">&amp;nbsp;</span>obrazie<span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
                <span class="nt">&lt;/label&gt;&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;source</span> <span class="na">src=</span><span class="s">"movie.mp4"</span> <span class="na">type=</span><span class="s">"video/mp4"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;source</span> <span class="na">src=</span><span class="s">"movie.ogg"</span> <span class="na">type=</span><span class="s">"video/ogg"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/video&gt;</span>
</code></pre></div></div>

<p>Shadow DOM ukrywa caÅ‚Ä… implementacjÄ™ pod prostym tagiem.<br />
DziÄ™ki temu style zaaplikowane do naszego elementu nie wpÅ‚ywajÄ… na inne elementy DOM-u.</p>

<p><img src="/assets/img/posts/2019-08-22-view-encapsulation-w-angularze/shadow-dom-browser-support.png" alt="Shadow DOM browser support" />
<span class="img-legend">Wsparcie Shadow DOM przez gÅ‚Ã³wne przeglÄ…darki<br />ÅºrÃ³dÅ‚o: <a href="https://www.webcomponents.org">www.webcomponents.org</a> - dostÄ™p: 2019-08-20</span></p>

<h2 id="view-encapsulation-w-angularze">View Encapsulation w Angularze</h2>

<p>DomyÅ›lnie Angular korzysta z wÅ‚asnego kapsuÅ‚kowania stylÃ³w (<code class="language-plaintext highlighter-rouge">ViewEncapsulation.Emulated</code>), ale udostÄ™pnia jeszcze 3 inne tryby kapsuÅ‚kowania (w tym jeden deprecated).</p>

<p>Aby zmieniÄ‡ domyÅ›lny tryb kapsuÅ‚kowania, wystarczy dodaÄ‡ odpowiedniÄ… opcjÄ™ w dekoratorze <code class="language-plaintext highlighter-rouge">@Component</code>, np.:<br />
<code class="language-plaintext highlighter-rouge">encapsulation: ViewEncapsulation.ShadowDom</code></p>

<p>OmÃ³wimy je na przykÅ‚adzie kodu z projektu demo. <a href="https://github.com/Michuu93/view-encapsulation-demo">Link do repozytorium</a></p>

<p>Projekt demo skÅ‚ada siÄ™ z 4 komponentÃ³w:</p>

<ul>
  <li><a href="https://github.com/Michuu93/view-encapsulation-demo/blob/master/src/app/app.component.ts"><code class="language-plaintext highlighter-rouge">app-root</code></a> - gÅ‚Ã³wny komponent zawierajÄ…cy w sobie pozostaÅ‚e komponenty</li>
  <li><a href="https://github.com/Michuu93/view-encapsulation-demo/blob/master/src/app/red-module/red.component.ts"><code class="language-plaintext highlighter-rouge">app-red</code></a></li>
  <li><a href="https://github.com/Michuu93/view-encapsulation-demo/blob/master/src/app/green-module/green.component.ts"><code class="language-plaintext highlighter-rouge">app-green</code></a></li>
  <li><a href="https://github.com/Michuu93/view-encapsulation-demo/blob/master/src/app/blue-module/blue.component.ts"><code class="language-plaintext highlighter-rouge">app-blue</code></a></li>
</ul>

<p>KaÅ¼dy z komponentÃ³w <code class="language-plaintext highlighter-rouge">app-red</code>, <code class="language-plaintext highlighter-rouge">app-green</code> oraz <code class="language-plaintext highlighter-rouge">app-blue</code> skÅ‚ada siÄ™ z jednego paragrafu z odpowiednim kolorem tekstu dla tego elementu. OprÃ³cz tego istniejÄ… 3 branche, po jednym dla kaÅ¼dego z omawianych trybÃ³w, co pozwoli na zobrazowanie nakÅ‚adania siÄ™ oraz kapsuÅ‚kowania stylÃ³w.</p>

<h3 id="viewencapsulationnone">ViewEncapsulation.None</h3>

<p>Brak kapsuÅ‚kowania, czyli style utworzone w komponencie sÄ… globalne (w sekcji <code class="language-plaintext highlighter-rouge">&lt;head&gt;</code>).<br />
W tym trybie elementy HTML i odpowiadajÄ…ce im selektory CSS wyglÄ…dajÄ… tak samo jak te, ktÃ³re napisaliÅ›my w kodzie.<br />
MoÅ¼e to spowodowaÄ‡ niechciane nadpisywanie stylÃ³w lub dodawanie ich do elementÃ³w, ktÃ³re nie posiadajÄ… Å¼adnego stylu.</p>

<p>W przykÅ‚adzie usunÄ™liÅ›my styl paragrafu w komponencie <code class="language-plaintext highlighter-rouge">app-green</code>.<br />
<a href="https://github.com/Michuu93/view-encapsulation-demo/tree/ViewEncapsulation.None">Link do repozytorium</a></p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span><span class="nx">Component</span><span class="p">,</span> <span class="nx">ViewEncapsulation</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@angular/core</span><span class="dl">'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
    <span class="na">selector</span><span class="p">:</span> <span class="dl">'</span><span class="s1">app-red</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">template</span><span class="p">:</span> <span class="s2">`</span><span class="err">
        &lt;p&gt;Red paragraph!&lt;/p&gt;
    </span><span class="s2">`</span><span class="p">,</span>
    <span class="na">styles</span><span class="p">:</span> <span class="p">[</span><span class="s2">`</span><span class="err">
        p {
            color: red;
        }
    </span><span class="s2">`</span><span class="p">],</span>
    <span class="na">encapsulation</span><span class="p">:</span> <span class="nx">ViewEncapsulation</span><span class="p">.</span><span class="nx">None</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">RedComponent</span> <span class="p">{</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span><span class="nx">Component</span><span class="p">,</span> <span class="nx">ViewEncapsulation</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@angular/core</span><span class="dl">'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
    <span class="na">selector</span><span class="p">:</span> <span class="dl">'</span><span class="s1">app-green</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">template</span><span class="p">:</span> <span class="s2">`</span><span class="err">
        &lt;p&gt;Green paragraph!&lt;/p&gt;
    </span><span class="s2">`</span><span class="p">,</span>
    <span class="na">encapsulation</span><span class="p">:</span> <span class="nx">ViewEncapsulation</span><span class="p">.</span><span class="nx">None</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">GreenComponent</span> <span class="p">{</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span><span class="nx">Component</span><span class="p">,</span> <span class="nx">ViewEncapsulation</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@angular/core</span><span class="dl">'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
    <span class="na">selector</span><span class="p">:</span> <span class="dl">'</span><span class="s1">app-blue</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">template</span><span class="p">:</span> <span class="s2">`</span><span class="err">
        &lt;p&gt;Blue paragraph!&lt;/p&gt;
    </span><span class="s2">`</span><span class="p">,</span>
    <span class="na">styles</span><span class="p">:</span> <span class="p">[</span><span class="s2">`</span><span class="err">
        p {
            color: blue;
        }
    </span><span class="s2">`</span><span class="p">],</span>
    <span class="na">encapsulation</span><span class="p">:</span> <span class="nx">ViewEncapsulation</span><span class="p">.</span><span class="nx">None</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">BlueComponent</span> <span class="p">{</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Wynikowy kod HTML:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;style&gt;</span>
        <span class="nt">p</span> <span class="p">{</span>
            <span class="nl">color</span><span class="p">:</span> <span class="no">red</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="nt">&lt;/style&gt;</span>
    <span class="nt">&lt;style&gt;</span>
        <span class="nt">p</span> <span class="p">{</span>
            <span class="nl">color</span><span class="p">:</span> <span class="no">blue</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="nt">&lt;/style&gt;</span>
<span class="nt">&lt;/head&gt;</span>

<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;app-root</span> <span class="na">ng-version=</span><span class="s">"8.2.2"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;app-red&gt;</span>
            <span class="nt">&lt;p&gt;</span>Red paragraph!<span class="nt">&lt;/p&gt;</span>
        <span class="nt">&lt;/app-red&gt;</span>
        <span class="nt">&lt;app-green&gt;</span>
            <span class="nt">&lt;p&gt;</span>Green paragraph!<span class="nt">&lt;/p&gt;</span>
        <span class="nt">&lt;/app-green&gt;</span>
        <span class="nt">&lt;app-blue&gt;</span>
            <span class="nt">&lt;p&gt;</span>Blue paragraph!<span class="nt">&lt;/p&gt;</span>
        <span class="nt">&lt;/app-blue&gt;</span>
    <span class="nt">&lt;/app-root&gt;</span>
<span class="nt">&lt;/body&gt;</span>
</code></pre></div></div>

<p><img src="/assets/img/posts/2019-08-22-view-encapsulation-w-angularze/view_encapsulation_none_result.jpg" alt="ViewEncapsulation.None" />
<span class="img-legend">Wynik widoczny w przeglÄ…darce</span></p>

<p>Jak widzimy, style zostaÅ‚y dodane w sekcji <code class="language-plaintext highlighter-rouge">&lt;head&gt;</code>, co spowodowaÅ‚o nadpisanie pierwszego stylu paragrafu drugim - <code class="language-plaintext highlighter-rouge">color: blue</code>. W efekcie wszystkie paragrafy majÄ… ten sam kolor, rÃ³wnieÅ¼ paragraf z komponentu <code class="language-plaintext highlighter-rouge">app-green</code>, ktÃ³ry nie posiada Å¼adnego stylu i powinien mieÄ‡ kolor domyÅ›lny.</p>

<h3 id="viewencapsulationemulated-default">ViewEncapsulation.Emulated (default)</h3>

<p>DomyÅ›lny tryb kapsuÅ‚kowania w Angularze, w ktÃ³rym style sÄ… domkniÄ™te w komponencie.<br />
W tym trybie style rÃ³wnieÅ¼ znajdujÄ… siÄ™ w sekcji <code class="language-plaintext highlighter-rouge">&lt;head&gt;</code>, ale posiadajÄ… dodatkowe atrybuty ktÃ³re wiÄ…Å¼Ä… je z elementami HTML pochodzÄ…cymi z tego samego komponentu.<br />
DziÄ™ki temu na stronie moÅ¼e istnieÄ‡ kilka komponentÃ³w zawierajÄ…cych element tego samego typu, ale z rÃ³Å¼nymi stylami.</p>

<p><strong>Uwaga!</strong> W tym trybie style nie majÄ… wpÅ‚ywu na inne elementy na stronie (jednak mogÄ… mieÄ‡ wpÅ‚yw na elementy komponentu dziecka - jeÅ›li komponent dziecka posiada tryb kapsuÅ‚kowania inny niÅ¼ Shadow DOM), poniewaÅ¼ sÄ… domkniÄ™te unikalnymi atrybutami. Globalne style strony (oraz style innych komponentÃ³w, ktÃ³re majÄ… wyÅ‚Ä…czony tryb kapsuÅ‚kowania) mogÄ… jednak mieÄ‡ wpÅ‚yw na ten komponent.</p>

<p>W przykÅ‚adzie przenieÅ›liÅ›my komponent <code class="language-plaintext highlighter-rouge">app-green</code> z komponentu <code class="language-plaintext highlighter-rouge">app-root</code> do komponentu <code class="language-plaintext highlighter-rouge">app-blue</code> i usunÄ™liÅ›my jego style.<br />
<a href="https://github.com/Michuu93/view-encapsulation-demo/tree/ViewEncapsulation.Emulated">Link do repozytorium</a></p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span><span class="nx">Component</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@angular/core</span><span class="dl">'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
    <span class="na">selector</span><span class="p">:</span> <span class="dl">'</span><span class="s1">app-red</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">template</span><span class="p">:</span> <span class="s2">`</span><span class="err">
        &lt;p&gt;Red paragraph!&lt;/p&gt;
    </span><span class="s2">`</span><span class="p">,</span>
    <span class="na">styles</span><span class="p">:</span> <span class="p">[</span><span class="s2">`</span><span class="err">
        p {
            color: red;
        }
    </span><span class="s2">`</span><span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">RedComponent</span> <span class="p">{</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span><span class="nx">Component</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@angular/core</span><span class="dl">'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
    <span class="na">selector</span><span class="p">:</span> <span class="dl">'</span><span class="s1">app-green</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">template</span><span class="p">:</span> <span class="s2">`</span><span class="err">
        &lt;p&gt;Green paragraph!&lt;/p&gt;
    </span><span class="s2">`</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">GreenComponent</span> <span class="p">{</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span><span class="nx">Component</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@angular/core</span><span class="dl">'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
    <span class="na">selector</span><span class="p">:</span> <span class="dl">'</span><span class="s1">app-blue</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">template</span><span class="p">:</span> <span class="s2">`</span><span class="err">
        &lt;app-green&gt;&lt;/app-green&gt;
        &lt;p&gt;Blue paragraph!&lt;/p&gt;
    </span><span class="s2">`</span><span class="p">,</span>
    <span class="na">styles</span><span class="p">:</span> <span class="p">[</span><span class="s2">`</span><span class="err">
        p {
            color: blue;
        }
    </span><span class="s2">`</span><span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">BlueComponent</span> <span class="p">{</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Wynikowy kod HTML:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;style&gt;</span>
        <span class="nt">p</span><span class="o">[</span><span class="nt">_ngcontent-pes-c0</span><span class="o">]</span> <span class="p">{</span>
            <span class="nl">color</span><span class="p">:</span> <span class="no">red</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="nt">&lt;/style&gt;</span>
    <span class="nt">&lt;style&gt;</span>
        <span class="nt">p</span><span class="o">[</span><span class="nt">_ngcontent-pes-c1</span><span class="o">]</span> <span class="p">{</span>
            <span class="nl">color</span><span class="p">:</span> <span class="no">blue</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="nt">&lt;/style&gt;</span>
<span class="nt">&lt;/head&gt;</span>

<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;app-root</span> <span class="na">ng-version=</span><span class="s">"8.2.2"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;app-red</span> <span class="na">_nghost-pes-c0</span><span class="nt">&gt;</span>
            <span class="nt">&lt;p</span> <span class="na">_ngcontent-pes-c0</span><span class="nt">&gt;</span>Red paragraph!<span class="nt">&lt;/p&gt;</span>
        <span class="nt">&lt;/app-red&gt;</span>
        <span class="nt">&lt;app-blue</span> <span class="na">_nghost-pes-c1</span><span class="nt">&gt;</span>
            <span class="nt">&lt;app-green</span> <span class="na">_ngcontent-pes-c1</span><span class="nt">&gt;</span>
                <span class="nt">&lt;p&gt;</span>Green paragraph!<span class="nt">&lt;/p&gt;</span>
            <span class="nt">&lt;/app-green&gt;</span>
            <span class="nt">&lt;p</span> <span class="na">_ngcontent-pes-c1</span><span class="nt">&gt;</span>Blue paragraph!<span class="nt">&lt;/p&gt;</span>
        <span class="nt">&lt;/app-blue&gt;</span>
    <span class="nt">&lt;/app-root&gt;</span>
<span class="nt">&lt;/body&gt;</span>
</code></pre></div></div>

<p><img src="/assets/img/posts/2019-08-22-view-encapsulation-w-angularze/view_encapsulation_emulated_result.jpg" alt="ViewEncapsulation.Emulated" />
<span class="img-legend">Wynik widoczny w przeglÄ…darce</span></p>

<p>DomyÅ›lny tryb pozwoliÅ‚ nam odseparowaÄ‡ style miÄ™dzy poszczegÃ³lnymi komponentami. W kodzie wynikowym widzimy, Å¼e style z komponentu rodzica <code class="language-plaintext highlighter-rouge">app-blue</code> nie zostaÅ‚y zaaplikowane do komponentu dziecka <code class="language-plaintext highlighter-rouge">app-green</code>, w efekcie czego paragraf ma kolor domyÅ›lny. StaÅ‚o siÄ™ tak, poniewaÅ¼ Angular dodaÅ‚ atrybut do stylu. GdybyÅ›my dodali styl w runtime, to zostaÅ‚by zaaplikowany rÃ³wnieÅ¼ do komponentu dziecka.</p>

<p>Na przykÅ‚adzie komponentu <code class="language-plaintext highlighter-rouge">app-red</code> - Angular dodaÅ‚ atrybut <code class="language-plaintext highlighter-rouge">_ngcontent-pes-c0</code> do selektora CSS oraz elementu HTML. W ten sposÃ³b style dodane w sekcji <code class="language-plaintext highlighter-rouge">&lt;head&gt;</code> aplikujÄ… siÄ™ tylko do odpowiednich elementÃ³w z tego samego komponentu. OprÃ³cz tego, na komponencie dodany zostaÅ‚ atrybut <code class="language-plaintext highlighter-rouge">_nghost-pes-c0</code>. Z czego skÅ‚adajÄ… siÄ™ te atrybuty?</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">_ngcontent</code> - okreÅ›la typ elementu, w tym przypadku zawartoÅ›Ä‡ komponentu</li>
  <li><code class="language-plaintext highlighter-rouge">_nghost</code> - okreÅ›la element <code class="language-plaintext highlighter-rouge">root</code> komponentu</li>
  <li><code class="language-plaintext highlighter-rouge">-pes</code> - oznacza ID aplikacji (<a href="https://angular.io/api/core/APP_ID">APP_ID</a>), jeÅ›li nie zostaÅ‚ ustawiony to zostanie przyjÄ™ty wygenerowany ciÄ…g znakÃ³w - dziÄ™ki temu nie nakÅ‚adajÄ… siÄ™ style miÄ™dzy rÃ³Å¼nymi aplikacjami wyÅ›wietlanymi w jednym oknie</li>
  <li><code class="language-plaintext highlighter-rouge">-c0</code> - numeruje kolejno elementy w komponencie</li>
</ul>

<h3 id="viewencapsulationshadowdom">ViewEncapsulation.ShadowDom</h3>

<p>KapsuÅ‚kowanie oparte na Shadow DOM (wymaga wsparcia przeglÄ…darki dla Shadow DOM).
W tym trybie style nie sÄ… dodawane w sekcji <code class="language-plaintext highlighter-rouge">&lt;head&gt;</code>, a istniejÄ… w <strong>Shadow Root</strong>.</p>

<p><strong>Uwaga!</strong> W tym trybie style nie majÄ… wpÅ‚ywu na inne elementy na stronie (jednak mogÄ… mieÄ‡ wpÅ‚yw na elementy komponentu dziecka - jeÅ›li komponent dziecka posiada tryb kapsuÅ‚kowania inny niÅ¼ Shadow DOM). Globalne style strony (oraz style innych komponentÃ³w) rÃ³wnieÅ¼ nie majÄ… wpÅ‚ywu na ten komponent.</p>

<p>W przykÅ‚adzie przenieÅ›liÅ›my komponent <code class="language-plaintext highlighter-rouge">app-green</code> z komponentu <code class="language-plaintext highlighter-rouge">app-root</code> do komponentu <code class="language-plaintext highlighter-rouge">app-blue</code>, usunÄ™liÅ›my jego style i ustawiliÅ›my domyÅ›lny tryb kapsuÅ‚kowania.<br />
<a href="https://github.com/Michuu93/view-encapsulation-demo/tree/ViewEncapsulation.ShadowDom">Link do repozytorium</a></p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span><span class="nx">Component</span><span class="p">,</span> <span class="nx">ViewEncapsulation</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@angular/core</span><span class="dl">'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
    <span class="na">selector</span><span class="p">:</span> <span class="dl">'</span><span class="s1">app-red</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">template</span><span class="p">:</span> <span class="s2">`</span><span class="err">
        &lt;p&gt;Red paragraph!&lt;/p&gt;
    </span><span class="s2">`</span><span class="p">,</span>
    <span class="na">styles</span><span class="p">:</span> <span class="p">[</span><span class="s2">`</span><span class="err">
        p {
            color: red;
        }
    </span><span class="s2">`</span><span class="p">],</span>
    <span class="na">encapsulation</span><span class="p">:</span> <span class="nx">ViewEncapsulation</span><span class="p">.</span><span class="nx">ShadowDom</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">RedComponent</span> <span class="p">{</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span><span class="nx">Component</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@angular/core</span><span class="dl">'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
    <span class="na">selector</span><span class="p">:</span> <span class="dl">'</span><span class="s1">app-green</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">template</span><span class="p">:</span> <span class="s2">`</span><span class="err">
        &lt;p&gt;Green paragraph!&lt;/p&gt;
    </span><span class="s2">`</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">GreenComponent</span> <span class="p">{</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span><span class="nx">Component</span><span class="p">,</span> <span class="nx">ViewEncapsulation</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@angular/core</span><span class="dl">'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
    <span class="na">selector</span><span class="p">:</span> <span class="dl">'</span><span class="s1">app-blue</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">template</span><span class="p">:</span> <span class="s2">`</span><span class="err">
        &lt;app-green&gt;&lt;/app-green&gt;
        &lt;p&gt;Blue paragraph!&lt;/p&gt;
    </span><span class="s2">`</span><span class="p">,</span>
    <span class="na">styles</span><span class="p">:</span> <span class="p">[</span><span class="s2">`</span><span class="err">
        p {
            color: blue;
        }
    </span><span class="s2">`</span><span class="p">],</span>
    <span class="na">encapsulation</span><span class="p">:</span> <span class="nx">ViewEncapsulation</span><span class="p">.</span><span class="nx">ShadowDom</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">BlueComponent</span> <span class="p">{</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Wynikowy kod HTML:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;/head&gt;</span>

<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;app-root</span> <span class="na">ng-version=</span><span class="s">"8.2.2"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;app-red&gt;</span>
            #shadow-root
            <span class="nt">&lt;style&gt;</span>
                <span class="nt">p</span> <span class="p">{</span>
                    <span class="nl">color</span><span class="p">:</span> <span class="no">red</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="nt">&lt;/style&gt;</span>
            <span class="nt">&lt;p&gt;</span>Red paragraph!<span class="nt">&lt;/p&gt;</span>
        <span class="nt">&lt;/app-red&gt;</span>
        <span class="nt">&lt;app-blue&gt;</span>
            #shadow-root
            <span class="nt">&lt;style&gt;</span>
                <span class="nt">p</span> <span class="p">{</span>
                    <span class="nl">color</span><span class="p">:</span> <span class="no">blue</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="nt">&lt;/style&gt;</span>
            <span class="nt">&lt;app-green&gt;</span>
                <span class="nt">&lt;p&gt;</span>Green paragraph!<span class="nt">&lt;/p&gt;</span>
            <span class="nt">&lt;/app-green&gt;</span>
            <span class="nt">&lt;p&gt;</span>Blue paragraph!<span class="nt">&lt;/p&gt;</span>
        <span class="nt">&lt;/app-blue&gt;</span>
    <span class="nt">&lt;/app-root&gt;</span>
<span class="nt">&lt;/body&gt;</span>
</code></pre></div></div>

<p><img src="/assets/img/posts/2019-08-22-view-encapsulation-w-angularze/view_encapsulation_shadow_dom_result.jpg" alt="ViewEncapsulation.ShadowDom" />
<span class="img-legend">Wynik widoczny w przeglÄ…darce</span></p>

<p>Tryb Shadow DOM rÃ³wnieÅ¼ pozwoliÅ‚ nam odseparowaÄ‡ style miÄ™dzy poszczegÃ³lnymi komponentami. W sekcji <code class="language-plaintext highlighter-rouge">&lt;head&gt;</code> nie ma juÅ¼ Å¼adnych stylÃ³w, natomiast sÄ… ukryte w Shadow Root elementÃ³w DOM-u. Na przykÅ‚adzie widzimy, Å¼e style z komponentu rodzica <code class="language-plaintext highlighter-rouge">app-blue</code> zostaÅ‚y zaaplikowane do komponentu dziecka <code class="language-plaintext highlighter-rouge">app-green</code>, w efekcie czego paragraf ma kolor niebieski. Gdyby komponent <code class="language-plaintext highlighter-rouge">app-green</code> rÃ³wnieÅ¼ posiadaÅ‚ tryb <code class="language-plaintext highlighter-rouge">ViewEncapsulation.ShadowDom</code>, to style rodzica nie zostaÅ‚yby zaaplikowane, poniewaÅ¼ korzystaÅ‚by ze stylÃ³w z wÅ‚asnego Shadow Root. Tryb Shadow DOM zabezpiecza nasz komponent rÃ³wnieÅ¼ przed stylami z komponentu rodzica, dodanymi w runtime.</p>

<h3 id="viewencapsulationnative"><del>ViewEncapsulation.Native</del></h3>

<p>Do niedawna zamiast <code class="language-plaintext highlighter-rouge">ViewEncapsulation.ShadowDom</code> dostÄ™pny byÅ‚ tryb <code class="language-plaintext highlighter-rouge">ViewEncapsulation.Native</code>.<br />
DziaÅ‚aÅ‚ on w podobny sposÃ³b, ale zostaÅ‚ wycofany z powodu wykorzystywania przestarzaÅ‚ego standardu Shadow DOM.</p>

<h2 id="podsumowanie">Podsumowanie</h2>

<p>OgÃ³lnie rzecz biorÄ…c, powinniÅ›my unikaÄ‡ braku kapsuÅ‚kowania stylÃ³w, poniewaÅ¼ powoduje to czÄ™sto niechciane efekty.<br />
Tryb Shadow DOM zapewnia caÅ‚kowite domkniÄ™cie stylÃ³w w komponencie, dziÄ™ki czemu style globalne oraz inne komponenty nie majÄ… na niego wpÅ‚ywu, tak samo jak komponent w tym trybie nie ma wpÅ‚ywu na inne komponenty na stronie (za wyjÄ…tkiem komponentÃ³w dzieci ktÃ³re majÄ… wÅ‚Ä…czony tryb kapsuÅ‚kowania inny niÅ¼ Shadow DOM).</p>

<p>Niestety nie wszystkie przeglÄ…darki mogÄ… wspieraÄ‡ ten tryb, dlatego Angular domyÅ›lnie udostÄ™pniÅ‚ wÅ‚asny, emulowany tryb kapsuÅ‚kowania. W trybie domyÅ›lnym na nasz komponent majÄ… jednak wpÅ‚yw style globalne, a takÅ¼e mogÄ… mieÄ‡ wpÅ‚yw inne komponenty, poniewaÅ¼ komponent w tym trybie nadal wykorzystuje style z sekcji <code class="language-plaintext highlighter-rouge">&lt;head&gt;</code>. W wiÄ™kszoÅ›ci przypadkÃ³w tryb domyÅ›lny jest wystarczajÄ…cy, wiÄ™c jeÅ›li zaleÅ¼y nam na jak najlepszym wsparciu przeglÄ…darek i nie mamy problemÃ³w z nadpisywaniem stylÃ³w przez inne komponenty lub aplikacje, to moÅ¼emy z powodzeniem z niego korzystaÄ‡.</p>

<p>Musimy jednak pamiÄ™taÄ‡, Å¼e mieszanie rÃ³Å¼nych trybÃ³w kapsuÅ‚kowania miÄ™dzy komponentami rÃ³wnieÅ¼ moÅ¼e spowodowaÄ‡ niezamierzone efekty.</p>
:ET