I"×<p>Odpowiedzialny programista tworzÄ…c aplikacje przestrzega powszechnie uznanych zasad tworzenia oprogramowania. JednÄ… z takich zasad jest <em><a href="https://en.wikipedia.org/wiki/Singleresponsibilityprinciple">Single Responsibility Principle</a></em>, ktÃ³ra uczy nas, Å¼e kaÅ¼dy moduÅ‚ powinien mieÄ‡ jedno, jasno zdefiniowane zadanie. PrzenoszÄ…c tÄ™ zasadÄ™ na strukturÄ™ aplikacji powinniÅ›my, co najmniej, wydzieliÄ‡ kaÅ¼dÄ… tworzonÄ… klasÄ™ do osobnego pliku. O ile Å›wiat <em>JavaScriptâ€™u</em> prÃ³bowaÅ‚ wielokrotnie zmierzyÄ‡ siÄ™ z problemem modularyzacji aplikacji, to jednak dopiero standard <em>ES6</em> pozwoliÅ‚ w peÅ‚ni zaadaptowaÄ‡ takie podejÅ›cie.</p>

<h2 id="modularyzacja-w-es6">Modularyzacja w ES6</h2>

<p>W ramach standardu <em>ES6</em> wprowadzono pojÄ™cie moduÅ‚u oraz standardowego sposobu wyraÅ¼ania zaleÅ¼noÅ›ci za pomocÄ… polecenia <em>import</em>.</p>

<p>Za moduÅ‚ przyjmuje siÄ™ pojedyczny plik. Wszystkie elementy w nim zdefiniowane sÄ… jego wÅ‚asnoÅ›ciÄ… i nie zabrudzajÄ… globalnej przestrzeni aplikacji. Elementy, ktÃ³re chcemy udostÄ™pniÄ‡ innym moduÅ‚om naleÅ¼y jawnie wskazaÄ‡ przez oznaczenie ich poleceniem <em>export</em>. Wyeksportowane elementy moÅ¼emy importowaÄ‡ i uÅ¼ywaÄ‡ w moduÅ‚ach zaleÅ¼nych poleceniem <em>import</em>.</p>

<p>PrzykÅ‚adowo, moÅ¼emy zdefiniowaÄ‡ zaleÅ¼noÅ›Ä‡ pomiÄ™dzy moduÅ‚ami:</p>

<p><em>service.ts</em></p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">class</span> <span class="nx">Service</span> <span class="p">{}</span>
</code></pre></div></div>

<p><em>component.ts</em></p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span><span class="nx">Service</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./service</span><span class="dl">'</span><span class="p">;</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">Component</span> <span class="p">{</span>
	<span class="k">private</span> <span class="nx">service</span><span class="p">:</span> <span class="nx">Service</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="problemy-z-importowaniem-zaleÅ¼noÅ›ci">Problemy z importowaniem zaleÅ¼noÅ›ci</h2>

<p>Standardowo importowane moduÅ‚y sÄ… wyszukiwane wzglÄ™dem importujÄ…cego pliku. W przypadku nietrywialnej struktury moÅ¼e to doprowadziÄ‡ do pogroszenia czytelnoÅ›ci aplikacji.</p>

<p>WyobraÅºmy sobie strukturÄ™ kodu:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>src
  \- user
    \- details
      user-details.component.ts
  \- authentication
    \- authentication.service.ts
</code></pre></div></div>

<p>WÃ³wczas zawartoÅ›Ä‡ pliku <em>user-details.component.ts</em> mogÅ‚aby wyglÄ…daÄ‡:</p>

<p><em>component.ts</em></p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span><span class="nx">AuthenticationService</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../../authentication/authentication.service</span><span class="dl">'</span><span class="p">;</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">UserDetailsService</span> <span class="p">{</span>
	<span class="k">private</span> <span class="nx">service</span><span class="p">:</span> <span class="nx">AuthenticationService</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Utrzymywanie wzglÄ™dnych Å›cieÅ¼ek importowanych moduÅ‚Ã³w jest trudne. CzytelnoÅ›Ä‡ istniejÄ…cych importÃ³w jest wÄ…tpliwa, a dopisywanie nowych niewygodne. RozwiÄ…zaniem tego problemu moÅ¼e byÄ‡ stosowanie absolutnych Å›cieÅ¼ek do moduÅ‚Ã³w, liczonych wzglÄ™dem gÅ‚Ã³wnego katalogu ze ÅºrÃ³dÅ‚ami. Przy takim podejÅ›ciu dopisywanie nowych importÃ³w jest proste (widzÄ…c strukturÄ™ aplikacji), a czytajÄ…c jesteÅ›my w stanie szybko siÄ™ zorientowaÄ‡ jakie zaleÅ¼noÅ›ci wÅ‚aÅ›ciwie wciÄ…gamy.</p>

<h2 id="uÅ¼ycie-absolutnych-Å›cieÅ¼ek-zaleÅ¼noÅ›ci">UÅ¼ycie absolutnych Å›cieÅ¼ek zaleÅ¼noÅ›ci</h2>

<p>Na szczÄ™Å›cie zalecane podejÅ›cie do pisania aplikacji w <em>Angular 2</em> zakÅ‚ada stosowanie kompilatora <em>TypeScript</em>, a ten od dÅ‚uÅ¼szego czasu wspiera stosowanie absolutnych Å›cieÅ¼ek przy importowaniu zaleÅ¼noÅ›ci. Dodatkowo, rÃ³wnieÅ¼ <em>Angular CLI</em> prawidÅ‚owo obsluguje bundlowanie zasobÃ³w zbudowanych z wykorzystaniem absolutnych Å›cieÅ¼ek.</p>

<p>W tym celu naleÅ¼y zmodyfikowaÄ‡ plik konfiguracyjny kompilatora <em>TypeScript</em>. W pliku <em>tsconfig.json</em> dopisujemy atrybut <em>baseUrl: â€œ.â€</em></p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"compilerOptions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"baseUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"."</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Od teraz moÅ¼emy we wszystkich miejscach importowaÄ‡ zaleÅ¼noÅ›ci podajÄ…c ich absolutne Å›cieÅ¼ki:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span><span class="nx">AuthenticationService</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">authentication/authentication.service</span><span class="dl">'</span><span class="p">;</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">UserDetailsService</span> <span class="p">{</span>
	<span class="k">private</span> <span class="nx">service</span><span class="p">:</span> <span class="nx">AuthenticationService</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="podsumowanie">Podsumowanie</h2>

<p>Wprowdzenie modularyzacji do standardu <em>ES6</em> to ogromny krok w stronÄ™ poprawy jakoÅ›ci aplikacji. Jednak podawanie wzglÄ™dnych Å›cieÅ¼ek do zaleÅ¼noÅ›ci moÅ¼e szybko doprowadziÄ‡ do pogorszenia czytelnoÅ›ci kodu i przyprawiÄ‡ niejednego programistÄ™ o bÃ³l gÅ‚owy. Na szczÄ™Å›ciÄ™ kompilator <em>TypeScript</em> pozawala definiowaÄ‡ zaleÅ¼noÅ›ci wskazujÄ…c absolutne Å›cieÅ¼ki - wystarczy za pomocÄ… atrybutu <em>baseUrl</em> kompilatora zdefiniowaÄ‡ katalog, wzglÄ™dem ktÃ³rego chcemy wyszukiwaÄ‡ plikÃ³w do importowania.</p>

<ul>
  <li><a href="https://github.com/Microsoft/TypeScript/pull/5728">Wsparcie dla absolutnych importÃ³w w kompilatorze TypeScript</a></li>
  <li><a href="https://github.com/angular/angular-cli/pull/2470">Wsparcie dla konfiguracji baseUrl w Angular CLI</a></li>
</ul>
:ET