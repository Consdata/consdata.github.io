I"„a<p>Czas na kolejnÄ… dawkÄ™ informacji dotyczÄ…cych testowania przy uÅ¼yciu Jasmine. Po przeczytaniu wczeÅ›niejszych wpisÃ³w (<a href="/2019/11/06/testowanie-frontendu-wprowadzenie-do-jasmine.html">Cz. 1</a> i <a href="/2019/11/20/testowanie-komponentow-i-serwisow.html">Cz. 2</a>) pora skupiÄ‡ siÄ™ na testowaniu komponentÃ³w angularowych, a w szczegÃ³lnoÅ›ci ich wejÅ›Ä‡ i wyjÅ›Ä‡. PrzykÅ‚ady oprzemy o aplikacjÄ™, ktÃ³ra bÄ™dzie skÅ‚adaÅ‚a siÄ™ z kilku drobnych wzajemnie siÄ™ ze sobÄ… komunikujÄ…cych elementÃ³w.</p>

<p>Schemat przykÅ‚adowej aplikacji wyglÄ…da nastÄ™pujÄ…co:</p>

<p><img src="/assets/img/posts/2019-12-05-testowanie-komponentow-z-inputami-i-outputami/diagram.jpg" alt="diagram komponentÃ³w w aplikacji" /></p>

<p>Jest to prosty program majÄ…cy na celu dodawanie i zapisywanie wynikÃ³w. ZostaÅ‚ rozpisany na komponenty tak, aby moÅ¼na byÅ‚o spokojnie przetestowaÄ‡ wejÅ›cia i wyjÅ›cia w rÃ³Å¼nych wariantach.</p>

<p>Aplikacja zawiera dwa komponenty przekazujÄ…ce wpisanÄ… liczbÄ™ (<code class="language-plaintext highlighter-rouge">CalculatorInputFieldComponent</code>), nastÄ™pnie wysyÅ‚ane sÄ… one do komponentu, ktÃ³ry zliczy nam wynik (<code class="language-plaintext highlighter-rouge">CalculatorResultComponent</code>) i zaprezentuje go w czytelnej formie (<code class="language-plaintext highlighter-rouge">CalucatorResultPresentationComponent</code>). Z poziomu komponentu prezentujÄ…cego wyniki moÅ¼emy je rÃ³wnieÅ¼ zapisaÄ‡ (<code class="language-plaintext highlighter-rouge">CalculatorSavedListComponent</code>). StrzaÅ‚ki na diagramie oznaczajÄ… wejÅ›cia i wyjÅ›cia komponentÃ³w.</p>

<h2 id="pisanie-testÃ³w-dotyczÄ…cych-input">Pisanie testÃ³w dotyczÄ…cych @Input</h2>

<p>Na poczÄ…tek weÅºmy na warsztat komponent pozwalajÄ…cy wyÅ›wietliÄ‡ listÄ™ wynikÃ³w, ktÃ³re chcielibyÅ›my zapisaÄ‡.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
  <span class="na">selector</span><span class="p">:</span> <span class="dl">'</span><span class="s1">calculator-saved-list</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">template</span><span class="p">:</span> <span class="s2">`</span><span class="err">
      &lt;div class="result"&gt;{{getText()}}{{savedValues}}&lt;/div&gt;
  </span><span class="s2">`</span><span class="p">,</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">CalculatorSavedListComponent</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">Input</span><span class="p">()</span> <span class="nx">savedValues</span><span class="p">:</span> <span class="nb">Array</span><span class="o">&lt;</span><span class="kr">number</span><span class="o">&gt;</span><span class="p">;</span>

  <span class="nx">getText</span><span class="p">():</span> <span class="kr">string</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">savedValues</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="dl">'</span><span class="s1">Brak zapisanych wartoÅ›ci</span><span class="dl">'</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">return</span> <span class="dl">'</span><span class="s1">Zapisane wartoÅ›ci to: </span><span class="dl">'</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

</code></pre></div></div>

<p>Trudno sobie wyobraziÄ‡ prostszy komponent. Mamy tutaj jeden input, przekazujÄ…cy listÄ™ wynikÃ³w, ktÃ³rÄ… chcemy wyÅ›wietliÄ‡.</p>

<p>Pora na napisanie testu sprawdzajÄ…cego, czy komponent poprawnie interpretuje przekazane mu wyniki</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">describe</span><span class="p">(</span><span class="dl">'</span><span class="s1">CalculatorSavedListComponent</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="na">component</span><span class="p">:</span> <span class="nx">CalculatorSavedListComponent</span><span class="p">;</span>
  <span class="kd">let</span> <span class="na">fixture</span><span class="p">:</span> <span class="nx">ComponentFixture</span><span class="o">&lt;</span><span class="nx">CalculatorSavedListComponent</span><span class="o">&gt;</span><span class="p">;</span>
  <span class="kd">let</span> <span class="na">resultText</span><span class="p">:</span> <span class="nx">DebugElement</span><span class="p">;</span>

  <span class="nx">beforeEach</span><span class="p">(</span><span class="k">async</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">TestBed</span><span class="p">.</span><span class="nx">configureTestingModule</span><span class="p">({</span>
      <span class="na">declarations</span><span class="p">:</span> <span class="p">[</span><span class="nx">CalculatorSavedListComponent</span><span class="p">]</span>
    <span class="p">}).</span><span class="nx">compileComponents</span><span class="p">();</span>

    <span class="nx">fixture</span> <span class="o">=</span> <span class="nx">TestBed</span><span class="p">.</span><span class="nx">createComponent</span><span class="p">(</span><span class="nx">CalculatorSavedListComponent</span><span class="p">);</span>
    <span class="nx">component</span> <span class="o">=</span> <span class="nx">fixture</span><span class="p">.</span><span class="nx">componentInstance</span><span class="p">;</span>
    <span class="nx">resultText</span> <span class="o">=</span> <span class="nx">fixture</span><span class="p">.</span><span class="nx">debugElement</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="nx">By</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="dl">'</span><span class="s1">.result</span><span class="dl">'</span><span class="p">));</span>
  <span class="p">}));</span>

  <span class="nx">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">should show correct text when list is empty</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">component</span><span class="p">.</span><span class="nx">savedValues</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="nx">fixture</span><span class="p">.</span><span class="nx">detectChanges</span><span class="p">();</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">resultText</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">nativeNode</span><span class="p">.</span><span class="nx">wholeText</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="dl">'</span><span class="s1">Brak zapisanych wartoÅ›ci</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">should show elements of list with correct text</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">component</span><span class="p">.</span><span class="nx">savedValues</span> <span class="o">=</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">3</span><span class="p">];</span>
    <span class="nx">fixture</span><span class="p">.</span><span class="nx">detectChanges</span><span class="p">();</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">resultText</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">nativeNode</span><span class="p">.</span><span class="nx">wholeText</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="dl">'</span><span class="s1">Zapisane wartoÅ›ci to: 12,3</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div>

<p>ZaczÄ™liÅ›my tutaj, podobnie jak w poprzednim artykule, od stworzenia <code class="language-plaintext highlighter-rouge">TestBed</code> i dodatkowo wyciÄ…gnÄ™liÅ›my za pomocÄ… zapytania element html prezentujÄ…cy tekst umieszczony z poziomu komponentu. MoÅ¼emy siÄ™ do niego odwoÅ‚aÄ‡ na wiele sposobÃ³w, na przykÅ‚ad za pomocÄ… klasy lub id.</p>

<p>Dysponujemy tutaj dwoma testami o identycznej strukturze. Przekazujemy wartoÅ›ci w inpucie i sprawdzamy, czy element umieszczony w html zostaÅ‚ poprawnie zmieniony. JeÅ¼eli inputÃ³w w komponencie mamy wiÄ™cej, moÅ¼emy je przetestowaÄ‡ dokÅ‚adnie w ten sam sposÃ³b.</p>

<h2 id="pisanie-testÃ³w-dotyczÄ…cych-output">Pisanie testÃ³w dotyczÄ…cych @Output</h2>

<p>NastÄ™pnie napiszmy test do komponentu pozwalajÄ…cego wpisaÄ‡ liczbÄ™, ktÃ³rÄ… przekazuje do komponentu nadrzÄ™dnego.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
  <span class="na">selector</span><span class="p">:</span> <span class="dl">'</span><span class="s1">calculator-input-field</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">template</span><span class="p">:</span> <span class="s2">`</span><span class="err">
      &lt;input (keyup)="onKey(</span><span class="s2">$</span><span class="err">event)"&gt;
  </span><span class="s2">`</span><span class="p">,</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">CalculatorInputFieldComponent</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">Output</span><span class="p">()</span> <span class="nx">fieldValue</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">EventEmitter</span><span class="o">&lt;</span><span class="kr">number</span><span class="o">&gt;</span><span class="p">();</span>

  <span class="nx">onKey</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">fieldValue</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Komponent rÃ³wnie prosty jak poprzedni z takim wyjÄ…tkiem, Å¼e mamy tutaj do czynienia z outputem.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">describe</span><span class="p">(</span><span class="dl">'</span><span class="s1">CalculatorInputFieldComponent</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="na">component</span><span class="p">:</span> <span class="nx">CalculatorInputFieldComponent</span><span class="p">;</span>
  <span class="kd">let</span> <span class="na">fixture</span><span class="p">:</span> <span class="nx">ComponentFixture</span><span class="o">&lt;</span><span class="nx">CalculatorInputFieldComponent</span><span class="o">&gt;</span><span class="p">;</span>
  <span class="kd">let</span> <span class="na">input</span><span class="p">:</span> <span class="nx">DebugElement</span><span class="p">;</span>

  <span class="nx">beforeEach</span><span class="p">(</span><span class="k">async</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">TestBed</span><span class="p">.</span><span class="nx">configureTestingModule</span><span class="p">({</span>
      <span class="na">declarations</span><span class="p">:</span> <span class="p">[</span><span class="nx">CalculatorInputFieldComponent</span><span class="p">]</span>
    <span class="p">}).</span><span class="nx">compileComponents</span><span class="p">();</span>

    <span class="nx">fixture</span> <span class="o">=</span> <span class="nx">TestBed</span><span class="p">.</span><span class="nx">createComponent</span><span class="p">(</span><span class="nx">CalculatorInputFieldComponent</span><span class="p">);</span>
    <span class="nx">component</span> <span class="o">=</span> <span class="nx">fixture</span><span class="p">.</span><span class="nx">componentInstance</span><span class="p">;</span>
    <span class="nx">input</span> <span class="o">=</span> <span class="nx">fixture</span><span class="p">.</span><span class="nx">debugElement</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="nx">By</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="dl">'</span><span class="s1">input</span><span class="dl">'</span><span class="p">));</span>
  <span class="p">}));</span>

  <span class="nx">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">should emit correct value on input change</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">component</span><span class="p">.</span><span class="nx">fieldValue</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">((</span><span class="nx">value</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">expect</span><span class="p">(</span><span class="nx">value</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="dl">'</span><span class="s1">7</span><span class="dl">'</span><span class="p">));</span>
    <span class="nx">input</span><span class="p">.</span><span class="nx">nativeElement</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">input</span><span class="dl">'</span><span class="p">).</span><span class="nx">dispatchEvent</span><span class="p">(</span><span class="k">new</span> <span class="nx">KeyboardEvent</span><span class="p">(</span><span class="dl">'</span><span class="s1">keyup</span><span class="dl">'</span><span class="p">));</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div>

<p>Czyli standardowo, zaczynamy od przygotowania moduÅ‚u testowego i uchwycenia elementu, ktÃ³ry chcemy przetestowaÄ‡. Warto tutaj zaznaczyÄ‡, Å¼e istniejÄ… inne sposoby na zainicjalizowanie komponentu niÅ¼ <code class="language-plaintext highlighter-rouge">TestBed</code>, wszystko zaleÅ¼y od tego co, i w jaki sposÃ³b, bÄ™dziemy testowaÄ‡. Na przykÅ‚ad kiedy nie potrzebujemy testowaÄ‡ elementÃ³w z DOM moÅ¼emy zostaÄ‡ przy zwykÅ‚ym inicjalizowaniu komponentÃ³w. WiÄ™cej szczegÃ³Å‚Ã³w moÅ¼na znaleÅºÄ‡Â w <a href="https://angular.io/guide/testing#component-test-basics">dokumentacji Angulara</a>.</p>

<p>Test zaczynamy od nasÅ‚uchiwania na zmiennÄ… <code class="language-plaintext highlighter-rouge">fieldValue</code> po ktÃ³rej spodziewamy siÄ™, Å¼e przekaÅ¼e nam wartoÅ›Ä‡ wpisanÄ… w pole. NastÄ™pnie uzupeÅ‚niamy wartoÅ›Ä‡ i aktywujemy event, pozwalajÄ…cy wywoÅ‚aÄ‡ metodÄ™ nasÅ‚uchujÄ…cÄ… na zmiany w polu. Test zakoÅ„czy siÄ™, kiedy zostanie wywoÅ‚ana metoda <code class="language-plaintext highlighter-rouge">expect</code> sprawdzajÄ…ca, czy wpisana przez nas wartoÅ›Ä‡ zgadza siÄ™ z oczekiwaniami. Test moÅ¼e siÄ™ rÃ³wnieÅ¼ zakoÅ„czyÄ‡ niepowodzeniem, kiedy po upÅ‚ywie danego czasu (domyÅ›lna konfiguracja wskazuje na 5s) Å¼aden <code class="language-plaintext highlighter-rouge">expect</code> nie zostanie wywoÅ‚any.</p>

<p>Na koniec moÅ¼emy zebraÄ‡ wiedzÄ™ i przetestowaÄ‡ komponent zawierajÄ…cy wejÅ›cia, jak i wyjÅ›cia. PoniÅ¼szy kod przedstawia komponent, ktÃ³ry dodaje wskazane liczby oraz opcjonalnie potrafi wysÅ‚aÄ‡ dane o wyniku do komponentu â€˜wyÅ¼ejâ€™.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
  <span class="na">selector</span><span class="p">:</span> <span class="dl">'</span><span class="s1">calculator-result</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">template</span><span class="p">:</span> <span class="s2">`</span><span class="err">
      &lt;calculator-result-presentation [calculationResult]="getCalculationResult()"&gt;&lt;/calculator-result-presentation&gt;
      &lt;button (click)="saveValue()"&gt;Zapisz wartoÅ›Ä‡&lt;/button&gt;
  </span><span class="s2">`</span><span class="p">,</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">CalculatorResultComponent</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">Input</span><span class="p">()</span> <span class="nx">values</span><span class="p">:</span> <span class="nb">Array</span><span class="o">&lt;</span><span class="kr">number</span><span class="o">&gt;</span><span class="p">;</span>
  <span class="p">@</span><span class="nd">Input</span><span class="p">()</span> <span class="nx">text</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="p">@</span><span class="nd">Output</span><span class="p">()</span> <span class="nx">savedValue</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">EventEmitter</span><span class="o">&lt;</span><span class="kr">number</span><span class="o">&gt;</span><span class="p">();</span>

  <span class="nx">getResult</span><span class="p">():</span> <span class="kr">number</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">Number</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">values</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="nb">Number</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">values</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
  <span class="p">}</span>

  <span class="nx">getCalculationResult</span><span class="p">():</span> <span class="kr">string</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">text</span><span class="p">}</span><span class="err"> </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">getResult</span><span class="p">()}</span><span class="s2">`</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">saveValue</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">savedValue</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getResult</span><span class="p">());</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>MoÅ¼emy zauwaÅ¼yÄ‡, Å¼e komponent potrzebuje innego komponentu (<code class="language-plaintext highlighter-rouge">calculator-result-presentation</code>), ktÃ³remu przekazuje wynik. W testach nie bÄ™dzie miaÅ‚o to duÅ¼ego znaczenia, naleÅ¼y jednak pamiÄ™taÄ‡ o jego deklaracji przy tworzeniu <code class="language-plaintext highlighter-rouge">TestBed</code>.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">describe</span><span class="p">(</span><span class="dl">'</span><span class="s1">CalculatorResultComponent</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="na">component</span><span class="p">:</span> <span class="nx">CalculatorResultComponent</span><span class="p">;</span>
  <span class="kd">let</span> <span class="na">fixture</span><span class="p">:</span> <span class="nx">ComponentFixture</span><span class="o">&lt;</span><span class="nx">CalculatorResultComponent</span><span class="o">&gt;</span><span class="p">;</span>
  <span class="kd">let</span> <span class="na">button</span><span class="p">:</span> <span class="nx">DebugElement</span><span class="p">;</span>

  <span class="nx">beforeEach</span><span class="p">(</span><span class="k">async</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">TestBed</span><span class="p">.</span><span class="nx">configureTestingModule</span><span class="p">({</span>
      <span class="na">declarations</span><span class="p">:</span> <span class="p">[</span>
        <span class="nx">CalculatorResultComponent</span><span class="p">,</span>
        <span class="nx">CalculatorResultPresentationComponent</span>
      <span class="p">]</span>
    <span class="p">}).</span><span class="nx">compileComponents</span><span class="p">();</span>

    <span class="nx">fixture</span> <span class="o">=</span> <span class="nx">TestBed</span><span class="p">.</span><span class="nx">createComponent</span><span class="p">(</span><span class="nx">CalculatorResultComponent</span><span class="p">);</span>
    <span class="nx">component</span> <span class="o">=</span> <span class="nx">fixture</span><span class="p">.</span><span class="nx">componentInstance</span><span class="p">;</span>
    <span class="nx">button</span> <span class="o">=</span> <span class="nx">fixture</span><span class="p">.</span><span class="nx">debugElement</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="nx">By</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="dl">'</span><span class="s1">button</span><span class="dl">'</span><span class="p">));</span>
  <span class="p">}));</span>

  <span class="nx">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">should emit correct value on button</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">component</span><span class="p">.</span><span class="nx">values</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">];</span>
    <span class="nx">component</span><span class="p">.</span><span class="nx">savedValue</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">((</span><span class="nx">value</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">expect</span><span class="p">(</span><span class="nx">value</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="mi">3</span><span class="p">));</span>
    <span class="nx">button</span><span class="p">.</span><span class="nx">nativeElement</span><span class="p">.</span><span class="nx">click</span><span class="p">();</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div>

<p>PowyÅ¼szy test przekazuje wartoÅ›ci do inputÃ³w oraz naciska przycisk. JeÅ¼eli wszystko dziaÅ‚a poprawnie, po jego naciÅ›niÄ™ciu powinniÅ›my zostaÄ‡ powiadomieni o wyniku dziaÅ‚aniu, ktÃ³ry zostaÅ‚ wyemitowany na output.</p>

<h2 id="testowanie-komponentÃ³w-angularowych---podsumowanie">Testowanie komponentÃ³w angularowych - podsumowanie.</h2>

<p>PowyÅ¼sze przykÅ‚ady przedstawiajÄ… najprostsze scenariusze testowe. Jest to jednak dobry punkt wyjÅ›cia do napisania wÅ‚asnych testÃ³w komponentÃ³w angularowych, przy ktÃ³rych zaprezentowane rozwiÄ…zania mogÄ… okazaÄ‡ siÄ™ uÅ¼yteczne.</p>
:ET