I"?¡<p>Czy istnieje moÅ¼liwoÅ›Ä‡ usprawnienia istniejÄ…cych procesÃ³w instalacji aplikacji lub nawet caÅ‚ych systemÃ³w mimo, Å¼e te sprawdzajÄ… siÄ™ juÅ¼ od wielu lat? Okazuje siÄ™, Å¼e tak. MoÅ¼na dziÄ™ki temu zaoszczÄ™dziÄ‡ trochÄ™ czasu na analizÄ™ wystÄ™pujÄ…cych problemÃ³w, a takÅ¼e zwiÄ™kszyÄ‡ czytelnoÅ›Ä‡ skryptÃ³w wykorzystywanych do instalacji. Ponadto moÅ¼na z administratora zdjÄ…Ä‡ obowiÄ…zek orientowania siÄ™ w konfiguracji dziesiÄ…tek serwerÃ³w.</p>

<p>Wystarczy w tym celu zastosowaÄ‡ oprogramowanie do automatyzacji procesÃ³w. Takim narzÄ™dziem moÅ¼e byÄ‡ Ansible od Red Hatâ€™a. W poniÅ¼szym artykule opisano przykÅ‚ady wykorzystania Ansibleâ€™a do instalacji platformy Eximee oraz kilku mikroserwisÃ³w wykorzystywanych przez klientÃ³w firmy. Opisane zostaÅ‚y podstawowe elementy oprogramowania i ich wykorzystanie. Wspomniano o sytuacjach, ktÃ³re moÅ¼na byÅ‚o zrobiÄ‡ lepiej podczas implementacji. Na koniec wymieniono gÅ‚Ã³wne zalety migracji ze skryptÃ³w bashowych na Ansible.</p>

<h2 id="jak-byÅ‚o-kiedyÅ›">Jak byÅ‚o kiedyÅ›?</h2>
<p>ZrÄ™cznoÅ›Ä‡ tworzenia skryptÃ³w w bashu od dawna jest waÅ¼nÄ… umiejÄ™tnoÅ›ciÄ… administratorÃ³w systemÃ³w informatycznych i osÃ³b dziaÅ‚ajÄ…cych w obszarze DevOps. Pozwala automatyzowaÄ‡ dowolne zadania od tworzenia plikÃ³w i nadawania im odpowiednich uprawnieÅ„, po wdraÅ¼anie i konfigurowanie gotowych aplikacji na docelowych serwerach. Skoro wiÄ™c istniejÄ… juÅ¼ sprawdzone i stosowane od wielu lat sposoby automatyzacji procesÃ³w, to czy warto je modyfikowaÄ‡ lub usprawniaÄ‡? Innymi sÅ‚owy, czy jest sens zmieniaÄ‡ coÅ›, co dziaÅ‚a?</p>

<p>Platforma Eximee, ktÃ³rÄ… rozwijamy, instalowana byÅ‚a wÅ‚aÅ›nie przy uÅ¼yciu skryptÃ³w bashowych. Wszystkie wykorzystywane tam funkcje przez lata zostaÅ‚y doszlifowane, aby spaÅ‚niaÅ‚y konkretne wymagania klientÃ³w i byÅ‚y na tyle uniwersalne, aby ograniczyÄ‡ liczbÄ™ wprowadzanych w nich zmian. Napisany kod speÅ‚niaÅ‚ wszystkie zaÅ‚oÅ¼enia â€“ tworzyÅ‚ odpowiedniÄ… strukturÄ™ katalogÃ³w, nadawaÅ‚ uprawnienia, zastÄ™powaÅ‚ placeholdery odpowiednimi wartoÅ›ciami z pliku konfiguracyjnego, startowaÅ‚ poszczegÃ³lne aplikacje osadzone wczeÅ›niej w katalogach docelowych, itp.</p>

<p>ChoÄ‡ proces wydaje siÄ™ prosty, to nie kaÅ¼da instalacja platformy koÅ„czyÅ‚a siÄ™ sukcesem. Przyczyn bywaÅ‚o kilka â€“ niechÄ™Ä‡ instalujÄ…cego do dokÅ‚adnego zapoznania siÄ™ z dokumentacjÄ…, czy choÄ‡by brak wczeÅ›niejszego doÅ›wiadczenia we wdraÅ¼aniu platformy. Zawsze mogÅ‚a zdarzyÄ‡ siÄ™ sytuacja, Å¼e nie wszystkie parametry instalacyjne zostaÅ‚y ustawione. TakÅ¼e uÅ¼ytkownik, z ktÃ³rego uruchamiano skrypt byÅ‚ nie bez znaczenia. MusiaÅ‚ on posiadaÄ‡ wszystkie uprawnienia do wykonania zawartych w kodzie instrukcji. KaÅ¼da z wymienionych przyczyn wymagaÅ‚a analizy. Aby ta byÅ‚a moÅ¼liwa konieczne byÅ‚o logowanie poszczegÃ³lnych etapÃ³w wykonania skryptu i wartoÅ›ci, ktÃ³re miaÅ‚y wpÅ‚yw na nieudanÄ… instalacjÄ™. Fakt ten wymagaÅ‚ przygotowania dodatkowych instrukcji tworzÄ…cych plik z logiem i wypisujÄ…cych stan instalacji na ekran konsoli uÅ¼ytkownika, tym samym zwiÄ™kszajac zÅ‚oÅ¼onoÅ›Ä‡ i rozmiar skryptu.</p>

<p>Sam start instalacji byÅ‚ doÅ›Ä‡ prosty. WystarczyÅ‚o rozpakowaÄ‡ archiwum ZIP, zawierajÄ…ce piki instalacyjne platformy Eximee i wykonaÄ‡ znajdujÄ…cy siÄ™ tam skrypt, przekazujÄ…c plik z ustawieniami dostosowanymi dla danego serwera. Plik z ustawieniami tworzony byÅ‚ po stronie klienta i rozwijany w oparciu o zaÅ‚Ä…czane instrukcje.</p>

<p>Uruchomienie skryptu instalacyjnego:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>./update.sh ~/config/settings.sh
</code></pre></div></div>

<p>Co dziaÅ‚o siÄ™ po uruchomieniu skryptu update.sh? Zasadniczo za kaÅ¼dym razem to samo. Zatrzymywane byÅ‚y kluczowe procesy (Tomcat, Servicemix, itd.), usuwane byÅ‚y â€Å›ladyâ€ po poprzedniej instalacji, rozpakowywana byÅ‚a zawartoÅ›Ä‡ archiwum, a wszystkie pliki trafiaÅ‚y do ustalonej struktury katalogÃ³w na serwerze klienta. Na koniec ponownie uruchamiane byÅ‚y kluczowe aplikacje. PrzykÅ‚adowa funkcja usuwajÄ…ca dotychczas wyglÄ…daÅ‚a tak:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function </span>cleanOldVersion <span class="o">{</span>
     	log <span class="s2">"Czyszczenie poprzedniej instalacji"</span>
    	
   	<span class="nv">CONFIGS</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">installSettings</span><span class="p">[</span><span class="s1">'ROOT'</span><span class="p">]</span><span class="k">}</span><span class="s2">/</span><span class="k">${</span><span class="nv">installSettings</span><span class="p">[</span><span class="s1">'CONFIG_FOLDER'</span><span class="p">]</span><span class="k">}</span><span class="s2">"</span>
    	<span class="nv">BINS</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">installSettings</span><span class="p">[</span><span class="s1">'ROOT'</span><span class="p">]</span><span class="k">}</span><span class="s2">/</span><span class="k">${</span><span class="nv">installSettings</span><span class="p">[</span><span class="s1">'BINARIES_FOLDER'</span><span class="p">]</span><span class="k">}</span><span class="s2">"</span>
    
   	log <span class="s2">"Usuwanie: </span><span class="nv">$CONFIGS</span><span class="s2">/eximee/bundles_config"</span>
    	<span class="nb">rm</span> <span class="nt">-rf</span> <span class="nv">$CONFIGS</span>/eximee/bundles_config <span class="o">||</span> fail <span class="s2">"Blad przy czyszczeniu poprzedniej instalacji"</span>
    
   	log <span class="s2">"Usuwanie: </span><span class="nv">$CONFIGS</span><span class="s2">/eximee/logback"</span>
    	<span class="nb">rm</span> <span class="nt">-rf</span> <span class="nv">$CONFIGS</span>/eximee/logback <span class="o">||</span> fail <span class="s2">"Blad przy czyszczeniu poprzedniej instalacji"</span>
    
   	log <span class="s2">"Usuwanie: find </span><span class="nv">$CONFIGS</span><span class="s2">/eximee/ -maxdepth 1 -type f -name </span><span class="se">\*</span><span class="s2">.xml"</span>
    	find <span class="nv">$CONFIGS</span>/eximee/ <span class="nt">-maxdepth</span> 1 <span class="nt">-type</span> f <span class="nt">-name</span> <span class="k">*</span>.xml | <span class="nb">grep</span> <span class="nt">-v</span> <span class="s2">"konfiguracja-partnera"</span> | 
   	<span class="nb">grep</span> <span class="nt">-v</span> 	<span class="s2">"knowledge-base"</span> | xargs <span class="nb">rm</span> <span class="nt">-rf</span> <span class="o">||</span> fail <span class="s2">"Blad przy czyszczeniu 	poprzedniej instalacji"</span>
    
   	log <span class="s2">"Czyszczenie tomcata.</span><span class="se">\n</span><span class="s2">Usuwanie plikÃ³w i katalogÃ³w bez webapps"</span>
    	find <span class="nv">$BINS</span>/tomcat/ <span class="nt">-maxdepth</span> 1 <span class="nt">-mindepth</span> 1 <span class="nt">-not</span> <span class="nt">-name</span> <span class="s2">"webapps"</span> | xargs <span class="nb">rm</span> <span class="nt">-rf</span>
    
   	log <span class="s2">"Usuwanie aplikacji bez knowledgebase"</span>
    	find <span class="nv">$BINS</span>/tomcat/webapps/ <span class="nt">-maxdepth</span> 1 <span class="nt">-mindepth</span> 1 <span class="nt">-not</span> <span class="nt">-name</span> <span class="s2">"knowledgebase*"</span> | 	xargs <span class="nb">rm</span> <span class="nt">-rf</span>
   
   	log <span class="s2">"Czyszczenie tomcata 9 na JVM 11.</span><span class="se">\n</span><span class="s2">Usuwanie plikÃ³w i katalogÃ³w bez webapps"</span>
    	find <span class="nv">$BINS</span>/tomcat-jvm11/ <span class="nt">-maxdepth</span> 1 <span class="nt">-mindepth</span> 1 <span class="nt">-not</span> <span class="nt">-name</span> <span class="s2">"webapps"</span> | xargs <span class="nb">rm</span> <span class="nt">-rf</span>
    
   	log <span class="s2">"Usuwanie aplikacji bez knowledgebase"</span>
    	find <span class="nv">$BINS</span>/tomcat-jvm11/webapps/ <span class="nt">-maxdepth</span> 1 <span class="nt">-mindepth</span> 1 <span class="nt">-not</span> <span class="nt">-name</span> <span class="s2">"knowledgebase*"</span> | 	xargs <span class="nb">rm</span> <span class="nt">-rf</span>
   
    	log <span class="s2">"Usuwanie: </span><span class="nv">$BINS</span><span class="s2">/eximee/bundles/</span><span class="se">\*</span><span class="s2">"</span>
    	<span class="nb">rm</span> <span class="nt">-rf</span> <span class="nv">$BINS</span>/eximee/bundles/<span class="k">*</span> <span class="o">||</span> fail <span class="s2">"Blad przy czyszczeniu poprzedniej instalacji"</span>
    
   	log <span class="s2">"Usuwanie: </span><span class="nv">$BINS</span><span class="s2">/eximee/bundles-jvm11/</span><span class="se">\*</span><span class="s2">"</span>
    	<span class="nb">rm</span> <span class="nt">-rf</span> <span class="nv">$BINS</span>/eximee/bundles-jvm11/<span class="k">*</span> <span class="o">||</span> fail <span class="s2">"Blad przy czyszczeniu poprzednieji instalacji"</span>
    
   	<span class="k">if</span> <span class="o">[</span> <span class="nt">-d</span> <span class="nv">$BINS</span>/servicemix/data/cache/bundle212 <span class="o">]</span><span class="p">;</span> <span class="k">then
     		</span>log <span class="s2">"Usuwanie: </span><span class="nv">$BINS</span><span class="s2">/servicemix/data/cache/bundle212"</span>
     		<span class="nb">rm</span> <span class="nt">-rf</span> <span class="nv">$BINS</span>/servicemix/data/cache/bundle212 <span class="o">||</span> fail <span class="s2">"Blad przy czyszczeniu 				poprzedniej instalacji"</span>
    	<span class="k">fi
    
   	</span>log <span class="nv">$PHASE_SEPARATOR</span>
    
   	log <span class="s2">"Czyszczenie zalezne od platformy"</span>
    	cleanSystemBased <span class="o">||</span> fail <span class="s2">"Blad czyszczenia czesci zaleznej od platformy"</span>
    	log <span class="nv">$PHASE_SEPARATOR</span>
   <span class="o">}</span>
</code></pre></div></div>
<p>Niby nic nadzwyczajnego, a jednak na samo logowanie postÄ™pu i usuniÄ™cie plikÃ³w, ktÃ³re i tak zostanÄ… ponownie wgrane na Å›rodowisko wraz z nowÄ… paczkÄ…, przeznaczono jakieÅ› 30 linii kodu. ChoÄ‡ logowanie niekoniecznie byÅ‚o niezbÄ™dne, to jednak pozwalaÅ‚o Å›ledziÄ‡ kolejne etapy procesu instalacji, dajÄ…c wiÄ™kszÄ… wiedzÄ™ osobom analizujÄ…cym ewentualne przyczyny nieudanej instalacji.</p>

<p>W takim razie, co miaÅ‚ zrobiÄ‡ administrator systemu, ktÃ³ry chciaÅ‚by skrÃ³ciÄ‡ proces i zainstalowaÄ‡ tylko te komponenty, ktÃ³re ulegÅ‚y zmianie? No cÃ³Å¼, musiaÅ‚ on wykazaÄ‡ siÄ™ nie lada cierpliwoÅ›ciÄ… i pewnoÅ›ciÄ… siebie, modyfikujÄ…c doÅ‚Ä…czony do paczki skrypt instalacyjny lub po prostu pogodziÄ‡ siÄ™ z faktem, Å¼e nie da siÄ™ tego zrobiÄ‡ â€na skrÃ³tyâ€.</p>

<p>Jakby tego byÅ‚o maÅ‚o, chcÄ…c zainstalowaÄ‡ kompletnÄ… platformÄ™ na â€Å›wieÅ¼ymâ€ Å›rodowisku konieczna byÅ‚a praca z kilkoma archiwami zip, ktÃ³re zawieraÅ‚y poszczegÃ³lne skÅ‚adowe systemu. Osobno bowiem dostarczano strukturÄ™ bazy danych, frontend, backend czy aplikacje do zarzÄ…dzania systemem plikÃ³w. W skrÃ³cie, aby administrator zainstalowaÅ‚ platformÄ™ Eximee musiaÅ‚ co najmniej 4 razy powtÃ³rzyÄ‡ podobny proces dla kaÅ¼dej czÄ™Å›ci platformy.</p>

<h2 id="era-ansible-">Era Ansible <img src="/assets/img/posts/2020-07-08-ansible-jak-uporzadkowac-chaos/ansible.png" alt="Logo Ansible" /></h2>
<p>JuÅ¼ od wczesnych lat studiÃ³w programistom wpaja siÄ™, aby dÄ…Å¼yÄ‡ do utrzymania eleganckiej i czytelnej struktury swoich aplikacji (<code class="language-plaintext highlighter-rouge">KISS â€“ Keep it simple, stupid</code>). Doskonale w ten trend wpasowuje siÄ™ <strong>Ansible</strong>. To kupione przez firmÄ™ <strong>Red Hat</strong> opensourceâ€™owe oprogramowanie m.in. do automatyzacji procesu wdraÅ¼ania aplikacji i zarzÄ…dzania konfiguracjÄ…. Za pomocÄ… jÄ™zyka <strong>YAML</strong>, w prosty sposÃ³b pozwala opisaÄ‡ wzajemne relacje miÄ™dzy systemami.</p>

<p>CzytajÄ…c dokumentacjÄ™ dostajemy obietnicÄ™ ujednolicenia konfiguracji, organizacji zÅ‚oÅ¼onych procesÃ³w i jednoczeÅ›nie Å‚atwÄ… do zarzÄ…dzania architekturÄ™. Ponadto czytamy, Å¼e Ansible pozwala osiÄ…gnÄ…Ä‡ wzrost wydajnoÅ›ci i nie nakÅ‚ada dodatkowych wymagaÅ„ na otoczenie, w ktÃ³rym dziaÅ‚a.</p>

<p>Do pracy z Ansible wymagane jest tylko, aby na maszynie sterujÄ…cej zainstalowane byÅ‚y:</p>
<ul>
  <li>Python 2.7 lub Python 3.5+</li>
  <li>Ansible (np. przy uÅ¼yciu Python Package Managerâ€™a)</li>
</ul>

<p>Ansible wymaga hasÅ‚a lub klucza SSH w celu rozpoczÄ™cia zarzÄ…dzania systemami i moÅ¼e rozpoczÄ…Ä‡ zarzÄ…dzanie nimi bez instalowania oprogramowania agenta, unikajÄ…c problemu â€zarzÄ…dzania zarzÄ…dzaniemâ€ powszechnego w wielu systemach do automatyzacji.</p>

<p>Ansible Å‚Ä…czy siÄ™ z systemami poprzez mechanizmy transportowe â€“ SSH (Unix) lub PowerShell (Windows). <strong>ModuÅ‚y</strong>, ktÃ³re sÄ… maÅ‚ymi programami, zawierajÄ…ce uzupeÅ‚nione argumenty, przenoszone sÄ… do tymczasowego katalogu przez wspomniane mechanizmy na zarzÄ…dzane maszyny. Tam sÄ… wykonywane, a nastÄ™pnie usuwane w ramach jednej akcji. ModuÅ‚y zwracajÄ… obiekty JSON na standardowe wyjÅ›cie, a te z kolei przetwarzane sÄ… przez program Ansible na maszynie sterujÄ…cej. MogÄ… one zarzÄ…dzaÄ‡ zasobami w sposÃ³b indempotentny. Oznacza to, Å¼e moduÅ‚ dziaÅ‚a w sposÃ³b deklaratywny, czyli moÅ¼e zdecydowaÄ‡ np. czy dany pakiet powinien zostaÄ‡ zainstalowany w okreÅ›lonej wersji lub nie wykonaÄ‡ Å¼adnej akcji, gdy system jest juÅ¼ w poÅ¼Ä…danym stanie. MoÅ¼na je teÅ¼ uruchamiaÄ‡ pojedynczo (imperatywnie).</p>

<p>Do zarzÄ…dzania administrowanymi systemami sÅ‚uÅ¼Ä… pliki <strong>inventory</strong>. PozwalajÄ… one na grupowanie serwerÃ³w i definiowanie zmiennych, ktÃ³re pÃ³Åºniej wykorzystywane bÄ™dÄ… w tzw. <strong>playbookach</strong>. Plik inventory moÅ¼e byÄ‡ uÅ¼yty globalnie, w ramach instalacji Ansible, lub wykorzystaÄ‡ lokalne pliki inventory dedykowane dla konkretnego projektu. PrzykÅ‚adowy fragment pliku inventory wyglÄ…da nastÄ™pujÄ…co:</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># eximee-ansible/settings/settings-template.yml</span>

<span class="c1">### OgÃ³lne parametry instalacji</span>

<span class="na">validation_protocol</span><span class="pi">:</span> <span class="s">http</span>
<span class="na">validation_host</span><span class="pi">:</span> <span class="s">eximee-validation</span>
<span class="na">validation_port</span><span class="pi">:</span> <span class="m">8080</span>
<span class="na">services_protocol</span><span class="pi">:</span> <span class="s">http</span>
<span class="na">services_host</span><span class="pi">:</span> <span class="s">eximee-services</span>
<span class="na">services_port</span><span class="pi">:</span> <span class="m">8080</span>
<span class="na">servicemix_host</span><span class="pi">:</span> <span class="s">eximee-servicemix</span>
<span class="na">validation_url</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">validation_protocol</span><span class="nv"> </span><span class="s">}}://{{</span><span class="nv"> </span><span class="s">validation_host</span><span class="nv"> </span><span class="s">}}:{{</span><span class="nv"> </span><span class="s">validation_port</span><span class="nv"> </span><span class="s">}}/osgi-bridge/validation/"</span>
<span class="na">services_url</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">services_protocol</span><span class="nv"> </span><span class="s">}}://{{</span><span class="nv"> </span><span class="s">services_host</span><span class="nv"> </span><span class="s">}}:{{</span><span class="nv"> </span><span class="s">services_port</span><span class="nv"> </span><span class="s">}}/osgi-bridge/serviceproxy/"</span>
<span class="na">eximee_status_url</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">eximee_status_protocol</span><span class="nv"> </span><span class="s">}}://{{</span><span class="nv"> </span><span class="s">eximee_status_host</span><span class="nv"> </span><span class="s">}}:{{</span><span class="nv"> </span><span class="s">eximee_status_port</span><span class="nv"> </span><span class="s">}}/eximee-status/"</span>
<span class="na">repository_url</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">repository_protocol</span><span class="nv"> </span><span class="s">}}://{{</span><span class="nv"> </span><span class="s">repository_host</span><span class="nv"> </span><span class="s">}}:{{</span><span class="nv"> </span><span class="s">repository_port</span><span class="nv"> </span><span class="s">}}/repository/"</span>
<span class="na">repository_username</span><span class="pi">:</span> <span class="s">UZUPELNIJ</span>
<span class="na">repository_password</span><span class="pi">:</span> <span class="s">UZUPELNIJ</span>
<span class="na">mongodb_host</span><span class="pi">:</span> <span class="s">eximee-mongo</span>
<span class="na">mongo_db_auth</span><span class="pi">:</span> <span class="s">MONGODB-CR</span>
<span class="nn">...</span>
</code></pre></div></div>
<p>W pliku inventory znajdujÄ… siÄ™ zatem dane dotyczÄ…ce hostÃ³w czy uÅ¼ywanych portÃ³w. W inventory warto umieÅ›ciÄ‡ rÃ³wnieÅ¼ takie zmienne, ktÃ³re sÄ… czÄ™Å›ciej wykorzystywane w playbookach lub zaleÅ¼ne sÄ… np. od serwerÃ³w, na ktÃ³rych instalujemy aplikacjÄ™. Nie powinno siÄ™ bowiem modyfikowaÄ‡ playbookÃ³w przy okazji kaÅ¼dej instalacji, a utrzymywaÄ‡ dla danego serwera odpowiedniÄ… konfiguracjÄ™. W przypadku platformy Eximee takimi zmiennymi sÄ… np. adresy URL rÃ³Å¼nych aplikacji. Warto teÅ¼ zwrÃ³ciÄ‡ uwagÄ™, Å¼e adresy w powyÅ¼szym przykÅ‚adzie nie sÄ… zdefiniowane â€na sztywnoâ€. ZawierajÄ… one odwoÅ‚ania do kilku innych zmiennych tworzÄ…c nowÄ… wartoÅ›Ä‡, na co rÃ³wnieÅ¼ pozwala Ansible.</p>

<p>Do zapamiÄ™tania haseÅ‚ i innych danych uwierzytelniajÄ…cych pomocne okaÅ¼e siÄ™ <strong>Ansible Vault</strong>. WÅ‚aÅ›ciwoÅ›Ä‡ ta pozwala na przechowywanie poufnych i wraÅ¼liwych danych (np. haseÅ‚) w inny sposÃ³b, niÅ¼ w postaci zwykÅ‚ego tekstu w plikach inventory, rolach lub playbookach. 
WykorzystujÄ…c poniÅ¼sze polecenie i podajÄ…c hasÅ‚o, przy uÅ¼yciu ktÃ³rego konfiguracja zostanie zaszyfrowana, moÅ¼na w prosty sposÃ³b zabezpieczyÄ‡ wskazany plik.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ansible-vault encrypt /path/to/file
New Vault password: 
Confirm New Vault password: 
Encryption successful
</code></pre></div></div>
<p>ZawartoÅ›Ä‡ takiego zasobu, ktÃ³ry przed wykonaniem operacji wyglÄ…daÅ‚ nastÄ™pujÄ…co:</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>
<span class="na">repository_username</span><span class="pi">:</span> <span class="s">repoUser</span>
<span class="na">repository_password</span><span class="pi">:</span> <span class="s">^$asdY$4-(56as</span>
</code></pre></div></div>
<p>po uÅ¼yciu Ansible Vault wyglÄ…da znacznie bezpieczniej:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ANSIBLE_VAULT</span><span class="p">;</span>1.1<span class="p">;</span>AES256
39303839656563346138653734383861363937643934323563356533366437333633383339323739
3135386136336365316535346630333261316232393238360a353437383762386665363662316138
63636139373162306165396231386265333264636537616463633935373637366164623762353135
3263663338323163350a386230383034653538363538303537376435356166346337386637623662
38613839356538336530636136333065343935393034656434666464623033633330656162643838
64376165663330366463313165336237343863636437666437303964313362313935366332346362
33313438383262383933643332663539373139376637626537393439323633366231653534356465
31366662633837353562
</code></pre></div></div>
<p>Uruchomienie <strong>playbooka</strong>, ktÃ³ry wykorzystuje zaszyfrowane pliki moÅ¼liwe jest poprzez uÅ¼ycie dyrektywy <code class="language-plaintext highlighter-rouge">--ask-vault-pass</code>, np.:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ansible-playbook <span class="nt">--ask-vault-pass</span> <span class="nt">--inventory</span> inventory_file sample_playbook.yml
</code></pre></div></div>

<p>WiedzÄ…c juÅ¼ czym jest moduÅ‚ oraz gdzie naleÅ¼y umieÅ›ciÄ‡ konfiguracjÄ™, potrzebna jest jeszcze wiedza, jak definiowaÄ‡ pewien stan systemu, ktÃ³ry chcemy osiÄ…gnÄ…Ä‡. Do tego wÅ‚aÅ›nie sÅ‚uÅ¼Ä… <strong>playbooki</strong>. Definicja takiego stanu dzieli siÄ™ na taski. ZwiÄ™ksza to nie tylko czytelnoÅ›Ä‡ kodu playbooka, ale teÅ¼ oddziela od siebie niezaleÅ¼ne etapy instalacji.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># eximee-ansible/platform.yml</span>

<span class="nn">---</span>
<span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Create installation_tmp dir</span>
  <span class="na">hosts</span><span class="pi">:</span> <span class="s">localhost</span>
  <span class="na">become</span><span class="pi">:</span> <span class="s">no</span>
  <span class="na">connection</span><span class="pi">:</span> <span class="s">local</span>
  <span class="na">tasks</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">file</span><span class="pi">:</span>
        <span class="na">path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">/installation_tmp"</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s">directory</span>

<span class="pi">-</span> <span class="na">import_playbook</span><span class="pi">:</span> <span class="s">check-settings.yml</span>
<span class="pi">-</span> <span class="na">import_playbook</span><span class="pi">:</span> <span class="s">eximee-common.yml</span>
<span class="pi">-</span> <span class="na">import_playbook</span><span class="pi">:</span> <span class="s">dmzzew.yml</span>
<span class="pi">-</span> <span class="na">import_playbook</span><span class="pi">:</span> <span class="s">dmz.yml</span>
<span class="pi">-</span> <span class="na">import_playbook</span><span class="pi">:</span> <span class="s">formstore.yml</span>

<span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Remove installation_tmp dir</span>
  <span class="na">hosts</span><span class="pi">:</span> <span class="s">localhost</span>
  <span class="na">become</span><span class="pi">:</span> <span class="s">no</span>
  <span class="na">gather_facts</span><span class="pi">:</span> <span class="no">false</span>
  <span class="na">connection</span><span class="pi">:</span> <span class="s">local</span>
  <span class="na">tasks</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">file</span><span class="pi">:</span>
        <span class="na">path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">/installation_tmp"</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s">absent</span>
</code></pre></div></div>
<p>W powyÅ¼szym przykÅ‚adzie widoczne sÄ… dwa proste zadania. Pierwsze, o nazwie Create installation_tmp dir tworzy tymczasowy katalog instalacyjny installation_tmp w lokalizacji, ktÃ³ra zdefiniowana zostaÅ‚a pod zmiennÄ… eximee_platform_dest. Drugie (<code class="language-plaintext highlighter-rouge">Remove installation_tmp dir</code>) ten katalog usuwa. PomiÄ™dzy tymi zadaniami zaimportowane zostaÅ‚y odseparowane logicznie playbooki. KaÅ¼dy z nich instaluje odrÄ™bnÄ… czÄ™Å›Ä‡ platformy, a ich rozdzielenie jeszcze bardziej zwiÄ™ksza czytelnoÅ›Ä‡ kodu. Co ciekawe, rÃ³wnieÅ¼ importowane playbooki zostaÅ‚y odpowiednio podzielone na <strong>role</strong>, ktÃ³re, na podstawie okreÅ›lonej struktury plikÃ³w, pozwalajÄ… na automatyczne Å‚adowanie zmiennych czy taskÃ³w. Ponadto, grupowanie zadaÅ„ w role pozwala na ich Å‚atwe reuÅ¼ywanie.</p>

<p>Jak uruchomiÄ‡ taki skrypt instalacyjny? Nic prostszego â€“ wystarczy poniÅ¼sza instrukcja:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ansible-playbook nazwa_playbooka.yml
</code></pre></div></div>

<p>Docelowo wiÄ™c pierwotna struktura paczki wdroÅ¼eniowej, skÅ‚adajÄ…cej siÄ™ ze skryptÃ³w bashowych, domyÅ›lnych parametrÃ³w konfiguracyjnych i plikÃ³w z platformÄ…, nabraÅ‚a nowego charakteru. Wprowdzone modyfikacje pozwoliÅ‚y na wydzielenie wielu plikÃ³w z odseperowanymi logicznie zadaniami, ktÃ³re nie musiaÅ‚y juÅ¼ byÄ‡ rozpakowywane na maszynie docelowej, a jedynie uruchomione z odpowiednim uÅ¼ytkownikiem z poziomu maszyny kontrolnej:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>eximee-ansible
|â”€â”€common
|â”€â”€roles                                   # katalog agregujÄ…cy role
|   |â”€â”€java8                               # rola java8
|   |   |â”€â”€tasks                           # taski zdefiniowane w ramach roli java8
|   |   |   |  ensure-dir-exists.yml     
|   |   |   |  install.yml
|   |   |   |  main.yml
|   |   |   |  unarchive.yml
|   |â”€â”€java11
|   |   |â”€â”€tasks                           # taski zdefiniowane w ramach roli java11
|   |   |   |  ...
|   |â”€â”€tomcat-server                       # rola tomcat-server
|   |   |â”€â”€tasks                           # taski zdefiniowane w ramach roli tomcat-server
|   |   |   |  main.yml
|   |   |   |  server.yml
|   |   |   |  setup.yml
|   ...
|â”€â”€settings                                # ogÃ³lne parametry instalacji 
|   |   settings-template.yml             
|   check-settings.yml                     # playbook weryfikujÄ…cy czy wszystkie wymagane parametry instalacyjne zostaÅ‚y zdefiniowane
|   formstore.yml                          # playbook instalacyjny dla roli formstore
|   platform.yml                           # gÅ‚Ã³wny playbook instalacyjny
|   ...
</code></pre></div></div>

<p>Jakie korzyÅ›ci niosÅ‚a za sobÄ… taka zmiana? Tych byÅ‚o kilka:</p>
<ul>
  <li>idempotenetnoÅ›Ä‡ stanu docelowego â€“ nie instalujemy czegoÅ›, co juÅ¼ jest w poÅ¼Ä…danym stanie;</li>
  <li>moÅ¼liwoÅ›Ä‡ zarzÄ…dzania konfiguracjami poszczegÃ³lnych komponentÃ³w platformy Eximee;</li>
  <li>platforma dostarczana jest jednÄ… paczkÄ…, zawierajÄ…cÄ… wszystkie komponenty;</li>
  <li>instalacja odbywaÄ‡ siÄ™ bÄ™dzie bardzo podobnie, jak miaÅ‚o to miejsce w przypadku skryptÃ³w bashowych â€“ uruchamiany bÄ™dzie gÅ‚Ã³wny playbook wraz ze wskazanaiem pliku konfiguracyjnego;</li>
  <li>moÅ¼liwoÅ›Ä‡ uruchomienia skryptÃ³w z poziomu maszyny sterujÄ…cej â€“ system bÄ™dzie wiedziaÅ‚ na jakim serwerze ma zostaÄ‡ zainstalowana platforma;</li>
  <li>instalowane bÄ™dÄ… tylko te aplikacje, ktÃ³rych konfiguracja siÄ™ zmieniÅ‚a;</li>
  <li>wbudowany mechanizm logowania postÄ™pu instalacji;</li>
  <li>znaczna poprawa czytelnoÅ›ci;</li>
  <li>Å‚atwa moÅ¼liwoÅ›Ä‡ rozszerzerzania skryptÃ³w â€“ np. o tagi, pozwalajÄ…ce na wykonanie skryptÃ³w tylko dla danego komponentu lub grupy komponentÃ³w.</li>
</ul>

<h2 id="ansible-a-instalacja-mikroserwisÃ³w">Ansible, a instalacja mikroserwisÃ³w</h2>
<p>PrzejÅ›cie na nowy sposÃ³b instalacji wykonane zostaÅ‚o nie tylko dla komponentÃ³w platformy, ale teÅ¼ dla mikroserwisÃ³w dostarczanych dla jednego z klientÃ³w. W kaÅ¼dym takim mikroserwisie, bÄ™dÄ…cym klasycznÄ… aplikacjÄ… Spring BootowÄ…, wydzielono dodatkowy moduÅ‚, w ktÃ³rym zdefiniowano taski odpowiedzialne za:</p>
<ul>
  <li>kopiowanie wykonywalnego jara na docelowe Å›rodowisko, pod okreÅ›lonÄ… w konfiguracji lokalizacjÄ™;</li>
  <li>utworzenie katalogu z konfiguracjÄ…;</li>
  <li>kopiowanie konfiguracji do utworzonego katalogu;</li>
  <li>utworzenie katalogu z logami;</li>
  <li>kopiowanie konfiguracji logbackâ€™a na Å›rodowisko docelowe;</li>
  <li>restart aplikacji, jeÅ¼eli ta jest juÅ¼ uruchomiona na Å›rodowisku;</li>
  <li>weryfikacjÄ™ dziaÅ‚ania aplikacji.</li>
</ul>

<p>Instalacja takiego mikroserwisu sprowadzaÅ‚a siÄ™ do uzupeÅ‚nienia parametrÃ³w konfiguracyjnych w pliku hosts-template.yml oraz wykonania polecenia:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ansible-playbook <span class="nt">--inventory</span> hosts-template.yml microservice-x.yml <span class="nt">-vvvv</span>
</code></pre></div></div>

<p>Plik microservice-x.yml to nic innego, jak gÅ‚Ã³wny playbook grupujÄ…cy w rolach wszystkie powyÅ¼sze zadania. Playbook jest bardzo prosty i wyglÄ…da nastÄ™pujÄ…co:</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>
<span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">deploy microservice-x</span>
  <span class="na">hosts</span><span class="pi">:</span> <span class="s">lan</span>
  <span class="na">become</span><span class="pi">:</span> <span class="s1">'</span><span class="s">'</span>
  <span class="na">become_user</span><span class="pi">:</span> <span class="s1">'</span><span class="s">'</span>
  <span class="na">roles</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">microservice-x</span>
</code></pre></div></div>
<p>JuÅ¼ na pierwszy rzut oka widaÄ‡, Å¼e wspomniane taski mogÅ‚y zostaÄ‡ z powodzeniem wydzielone do osobnego projektu. Ten odrÄ™bny byt mÃ³gÅ‚by staÄ‡ siÄ™ wspÃ³lnym elementem dla wszystkich mikroserwisÃ³w po to, by nie powielaÄ‡ kodu i zmniejszyÄ‡ zÅ‚oÅ¼onoÅ›Ä‡ dodatkowego moduÅ‚u. W takich kwestiach bardzo pomocny jest rozdziaÅ‚ poÅ›wiÄ™cony dobrym praktykom w samej dokumentacji Ansible, dostÄ™pny pod adresem: <a href="https://docs.ansible.com/ansible/latest/user_guide/playbooks_best_practices.html"><strong>dobre praktyki</strong></a>.</p>

<p>Podczas pierwszych wdroÅ¼eÅ„ na Å›rodowisku klienckim okazaÅ‚o siÄ™, Å¼e konieczne jest wprowadzenie dodatkowej konfiguracji. PowyÅ¼sza definicja playbooka jest juÅ¼ w niÄ… zaopatrzona. Chodzi bowiem o dyrektywy <code class="language-plaintext highlighter-rouge">become</code> oraz <code class="language-plaintext highlighter-rouge">become_user</code>. Pierwsze instalacje aplikacji koÅ„czyÅ‚y siÄ™ niepowodzeniem z powodu braku odpowiednich uprawnieÅ„. Dyrektywa <code class="language-plaintext highlighter-rouge">become</code> pozwala na ich tzw. eskalacjÄ™ czyli wykonanie zadania z uprawnieniami innego uÅ¼ytkownika, niÅ¼ obecnie zalogowany (zdalny). Innymi sÅ‚owy zastosowanie dyrektywy <code class="language-plaintext highlighter-rouge">become</code> pozwala na wykonanie poleceÅ„ przy uÅ¼yciu takich narzÄ™dzi jak sudo, su, runas, itd. JeÅ¼eli zdefiniowana zostanie jedynie dyrektywa <code class="language-plaintext highlighter-rouge">become</code>, uÅ¼ytkownik domyÅ›lnie otrzymuje uprawnienia rootâ€™a. Problem w tym, Å¼e nie zawsze to wÅ‚aÅ›nie ten uÅ¼ytkownik byÅ‚ tym poÅ¼Ä…danym. Tu z pomocÄ… przyszÅ‚a dyrektywa <code class="language-plaintext highlighter-rouge">become_user</code>, ktÃ³ra pozwala na zdefiniowanie nazwy uÅ¼ytkownika, z ktÃ³rym mamy np. wykonaÄ‡ odpowiednie zadanie. Wykorzystanie w powyÅ¼szym przykÅ‚adzie playbooka nastÄ™pujÄ…cych wartoÅ›ci:</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">switch_user</span><span class="pi">:</span> <span class="s">yes</span>            <span class="c1"># wÅ‚Ä…czenie eskalacji uprawnieÅ„</span>
<span class="na">switched_user</span><span class="pi">:</span> <span class="s">tomcat</span>       <span class="c1"># przeÅ‚Ä…czenie na uÅ¼ytkownika o nazwie tomcat</span>
</code></pre></div></div>
<p>pozwoli na wykonanie zadaÅ„ z poziomu uÅ¼ytkownika o nazwie tomcat, a nie tego, ktÃ³ry jest obecnie zalogowany na serwerze.</p>

<h2 id="Å›ledzenie-postÄ™pÃ³w-instalacji">Åšledzenie postÄ™pÃ³w instalacji</h2>
<p>Ansible dostarcza wbudowany mechanizm logowania, pozwalajÄ…cy na Å›ledzenie postÄ™pÃ³w instalacji oraz uzyskanie informacji, ktÃ³re zadania zostaÅ‚y wykonane, a ktÃ³re nie. PrzykÅ‚adowy log procesu instalacji mikroserwisu wyglÄ…da nastÄ™pujÄ…co:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>PLAY [deploy microservice-x] ********************************************************************************************************************************************************************************

TASK [Gathering Facts] **********************************************************************************************************************************************************************************
ok: [lan]

TASK [microservice-x : copy microservice-x jar] *****************************************************************************************************************************************************************
[WARNING]: Unable to find '../files/bundles' in expected paths (use -vvvvv to see paths)

TASK [microservice-x : create config directory] *************************************************************************************************************************************************************
ok: [lan]

TASK [ microservice-x : copy application properties] *********************************************************************************************************************************************************
ok: [lan] =&gt; (item=/home/users/rmastalerek/Projects/Eximee/microservice-x/microservice-x-deploy/src/main/ansible/install/roles/microservice-x/files/../templates/application.properties.j2)

TASK [microservice-x : make sure logs directory exists] *****************************************************************************************************************************************************
ok: [lan]

TASK [microservice-x : create logs directory] ***************************************************************************************************************************************************************
skipping: [lan]

TASK [microservice-x : make sure sensitive logs directory exists] *******************************************************************************************************************************************
ok: [lan]

TASK [microservice-x : create sensitive logs directory] *****************************************************************************************************************************************************
skipping: [lan]

TASK [microservice-x : copy logback conf] *******************************************************************************************************************************************************************
ok: [lan]

TASK [microservice-x : get pid of microservice-x] ***************************************************************************************************************************************************************
changed: [lan]

TASK [microservice-x : kill microservice-x processes] ***********************************************************************************************************************************************************
changed: [lan] =&gt; (item=14454)

TASK [microservice-x : wait_for] ****************************************************************************************************************************************************************************
ok: [lan] =&gt; (item=14454)

TASK [microservice-x : stop microservice-x] *********************************************************************************************************************************************************************

TASK [microservice-x : start/restart microservice-x] ************************************************************************************************************************************************************
changed: [lan]

TASK [microservice-x : check if microservice-x process exists] **************************************************************************************************************************************************
ok: [lan]

TASK [microservice-x : report status of service] ************************************************************************************************************************************************************
skipping: [lan]

TASK [microservice-x : report status of service] ************************************************************************************************************************************************************
ok: [lan] =&gt; {
    "msg": "Microservice-x works"
}

PLAY RECAP **********************************************************************************************************************************************************************************************
lan             : ok=12   changed=3    unreachable=0    failed=0    skipped=5    rescued=0    ignored=0 
</code></pre></div></div>
<p>SposÃ³b prezentowania informacji przez Ansible jest doÅ›Ä‡ czytelny. InstalacjÄ™ rozpoczyna uruchomienie playbooka o nazwie deploy microservice-x. NastÄ™pnie wykonywany jest domyÅ›lny, ansibleâ€™owy task <code class="language-plaintext highlighter-rouge">Gathering Facts</code>, ktÃ³ry zbiera informacjÄ™ o hostach, na ktÃ³rych wykonywane bÄ™dÄ… zmiany. PÃ³Åºniej juÅ¼ wykonywane sÄ… wszystkie zadania zdefiniowane w playbooku i wykorzystywanych rolach. KaÅ¼de zadanie koÅ„czy siÄ™ pewnym statusem. Na powyÅ¼szym przykÅ‚adzie widaÄ‡, Å¼e zadania uzyskaÅ‚y takie statusy, jak: <strong>ok</strong>, <strong>changed</strong> czy <strong>skipping</strong>. DziÄ™ki wspomnianej na poczÄ…tku idempotentnoÅ›ci niektÃ³re zadania zostaÅ‚y pominiÄ™te, poniewaÅ¼ system byÅ‚ juÅ¼ w poÅ¼Ä…danym stanie. Tym zadaniom system przypisaÅ‚ status <strong>ok</strong>. Taski, ktÃ³re wymagaÅ‚y wykonania jakiejÅ› zmiany na serwerze oznaczone zostaÅ‚y statusem <strong>changed</strong>. Status <strong>skipping</strong> zostaÅ‚ przypisany zadaniom, ktÃ³rych wykonanie zostaÅ‚o oparte o pewien warunek, a ten z kolei nie zostaÅ‚ speÅ‚niony.</p>

<p>KaÅ¼de wykonanie playbooka koÅ„czy siÄ™ podsumowaniem. Zawiera ono zbiorczÄ… informacjÄ™ dotyczÄ…cÄ… wszystkich zadaÅ„ oraz ich koÅ„cowych statusach. Gdyby okazaÅ‚o siÄ™, Å¼e jeden z kluczowych taskÃ³w nie moÅ¼e zostaÄ‡ wykonany, np. z powodu braku poÅ‚Ä…czenia z serwerem docelowym, to skrypt zakoÅ„czyÅ‚by swoje wykonanie na tym zadaniu, np.:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>PLAY [deploy microservice-x] ********************************************************************************************************************************************************************************

TASK [Gathering Facts] **********************************************************************************************************************************************************************************
fatal: [lan]: UNREACHABLE! =&gt; {"changed": false, "msg": "Failed to connect to the host via ssh: ssh: Could not resolve hostname some.host.consdata.local: Temporary failure in name resolution", "unreachable": true}

PLAY RECAP **********************************************************************************************************************************************************************************************
lan                        : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0
</code></pre></div></div>
<p>Ansible daje moÅ¼liwoÅ›Ä‡ wykonania playbooka z wiÄ™kszÄ… iloÅ›ciÄ… informacji poprzez uÅ¼ycie przeÅ‚Ä…cznika verbose (-vvv lub -vvvv z moÅ¼liwoÅ›ciÄ… debugowania poÅ‚Ä…czenia)</p>

<h2 id="podsumowanie">Podsumowanie</h2>
<p>Zgrabne zarzÄ…dzanie konfiguracjÄ…, automatyzacja i uproszczenie procesu instalacji, do tego czytelnoÅ›Ä‡ i wiÄ™ksza kontrola nad procesem wdraÅ¼ania aplikacji. To gÅ‚Ã³wne zalety tego, co udaÅ‚o siÄ™ wprowadziÄ‡ zastÄ™pujÄ…c nieco archaiczne podejÅ›cie oparte o bashowe skrypty.</p>

<p>Wymienione korzyÅ›ci wpÅ‚ywajÄ… przede wszystkim na skrÃ³cenie czasu wykonywania powtarzalnych czynnoÅ›ci. Sama automatyzacja pozwala ograniczyÄ‡ do minimum ryzyko popeÅ‚nienia bÅ‚Ä™du ludzkiego podczas instalowania aplikacji. Zapis krokÃ³w instalacji aplikacji czy systemu w postaci prostych taskÃ³w oraz grupowanie ich w moduÅ‚y a nastÄ™pnie playbooki pozwala na standaryzacjÄ™ procesu. To z kolei wyklucza niepotrzebne wykonywanie rÄ™cznych zmian i pÃ³ÅºniejszÄ…, czÄ™sto czasochÅ‚onnÄ… analizÄ™ problemu, gdy taki wystÄ…pi. DziÄ™ki plikom inventory nie jest konieczne utrzymywanie przez administratora konfiguracji do znacznej iloÅ›ci serwerÃ³w i dokumentacji do nich. NiewÄ…tpliwÄ… zaletÄ… Ansible jest przewidywalnoÅ›Ä‡. Zapewnia ona efektywnÄ… pracÄ™ administratora czy DevOpsa i ogranicza wystÄ…pienie nieoczekiwanych problemÃ³w.</p>
:ET