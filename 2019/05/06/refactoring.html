<!DOCTYPE html>
<html lang="pl">
<script src="/js/lunr.min.js"></script><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Przykłady refaktoryzacji na podstawie książki Martina Fowlera i Kenta Becka ‘Refactoring’ | Consdata - blog techniczny</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Przykłady refaktoryzacji na podstawie książki Martina Fowlera i Kenta Becka ‘Refactoring’" />
<meta name="author" content="sucuncu" />
<meta property="og:locale" content="pl" />
<meta name="description" content="Książka ‘Refactoring’ Martina Fowlera i Kenta Becka została po raz pierwszy wydana w 1999 roku i często określana jest jako pozycja wybitna, ponadczasowa, jako must read każdego programisty. Dodatkowo w tym roku wyszła jej druga edycja. Po co?" />
<meta property="og:description" content="Książka ‘Refactoring’ Martina Fowlera i Kenta Becka została po raz pierwszy wydana w 1999 roku i często określana jest jako pozycja wybitna, ponadczasowa, jako must read każdego programisty. Dodatkowo w tym roku wyszła jej druga edycja. Po co?" />
<link rel="canonical" href="https://blog.consdata.tech/2019/05/06/refactoring.html" />
<meta property="og:url" content="https://blog.consdata.tech/2019/05/06/refactoring.html" />
<meta property="og:site_name" content="Consdata - blog techniczny" />
<meta property="og:image" content="https://blog.consdata.tech/assets/img/posts/2019-05-06-refactoring/thumbnail.webp" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-05-06T03:15:00-05:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://blog.consdata.tech/assets/img/posts/2019-05-06-refactoring/thumbnail.webp" />
<meta property="twitter:title" content="Przykłady refaktoryzacji na podstawie książki Martina Fowlera i Kenta Becka ‘Refactoring’" />
<script type="application/ld+json">
{"author":{"@type":"Person","name":"sucuncu"},"image":"https://blog.consdata.tech/assets/img/posts/2019-05-06-refactoring/thumbnail.webp","@type":"BlogPosting","headline":"Przykłady refaktoryzacji na podstawie książki Martina Fowlera i Kenta Becka ‘Refactoring’","description":"Książka ‘Refactoring’ Martina Fowlera i Kenta Becka została po raz pierwszy wydana w 1999 roku i często określana jest jako pozycja wybitna, ponadczasowa, jako must read każdego programisty. Dodatkowo w tym roku wyszła jej druga edycja. Po co?","dateModified":"2019-05-06T03:15:00-05:00","datePublished":"2019-05-06T03:15:00-05:00","url":"https://blog.consdata.tech/2019/05/06/refactoring.html","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.consdata.tech/2019/05/06/refactoring.html"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css?family=Raleway:400,700,600,500,300,200,100,800,900" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,600,500,300,200,100,800,900" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@100;400;500;700&display=swap" rel="stylesheet">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" crossorigin="anonymous">
  <link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://blog.consdata.tech/feed.xml" title="Consdata - blog techniczny" /><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NFV6DPR');</script>


  <link rel="icon" type="image/x-icon" href="/favicon.ico">
</head>
<body><nav class="site-header">
    <div class="container">
        <div class="header navbar-default" role="navigation">
            <div class="header-brand">
                <a class="header-logo" href="/">
                    <img src="/assets/img/logo.png" alt="consdata.com">
                </a>
                <div class="mobile-search">
                    
<form action="/search.html" method="get">

    <div class="search-input-container">
        <input type="text" placeholder="Znajdź artykuł..." id="search-box-mobile" name="query" class="search-input" autocomplete="off">
        <i class="fa fa-search search-icon" onclick="expandInputMobile()"></i>
    </div>
</form>

<script>
    const inputMobile = document.getElementById("search-box-mobile");
    const logo = document.getElementById("header-logo");
    const expandInputMobile = () => {
        inputMobile.classList.toggle("expanded");
        logo.classList.toggle("header-logo");
        logo.classList.toggle("logo-invisible");
    };
</script>

                </div>
            </div>
            <div id="header-links">
                <div>
                    <a class="nav-link" href="/">Blog techniczny</a>
                    <a class="nav-link" href="https://consdata.com/pl/blog/biznesowy">Blog biznesowy</a>
                    <a class="nav-link" href="https://consdata.com/pl/blog/hr">Dział HR</a>
                </div>
                
                <a class="language-switch" onclick="navigate('/en/2019/05/06/refactoring.html')">EN</a>
                
            </div>

        </div>
    </div>
</nav>
<script>
    function navigate(baseUrl) {
        const queryParams = window.location.search;
        window.location.href = baseUrl + queryParams;
    }
</script>
<main class="page-content" aria-label="Content">
    


<div class="blog">
    <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
        <div class="post-content-sidebar">
            <div class="post-content">
                <div class="badge">refaktoryzacja</div>
                <h1 class="post-big-title p-name" itemprop="name headline">Przykłady refaktoryzacji na podstawie książki Martina Fowlera i Kenta Becka &#39;Refactoring&#39;</h1>
                <div class="post-metadata">
    <div>
    <a class="author" href="/authors/sucuncu.html">
        <img class="author-image" src="/assets/img/authors/sucuncu.webp" alt="author">
        <span class="author-name">Sylwia Üçüncü</span><a class="author" href="https://github.com/sszadi">
            <img class="github-icon" src="/assets/icon/github.svg">
        </a>
        
    </a>
</div>

    <div class="metadata">
        
        <span class="publish-date">
6

maja



2019
</span>
    </div>
</div>

                <div itemprop="articleBody" class="post-content-container">
                    <div class="post-content-left-pane">
                        <div class="post-content">
                            <p>Książka “Refactoring” Martina Fowlera i Kenta Becka została po raz pierwszy wydana w 1999 roku i często określana jest jako pozycja wybitna, ponadczasowa, jako must read każdego programisty. 
Dodatkowo w tym roku wyszła jej druga edycja. Po co?</p>

<p>Martin podkreśla przecież, że notatki z lat dziewięćdziesiątych, które tworzył i ogólnie zasady refaktoryzacji wciąż są aktualne i wciąż sam ich używa. Mimo to wszystkie jej rozdziały zostały przepisane, a przede wszystkim zmienił się język wykorzystany w przykładach - wtedy wybrali Javę, tym razem postawili na JavaScript.</p>

<p>Dominująca część tej pozycji to katalog reguł refaktoryzacji wraz z motywacją, sposobem jej wykonania i oczywiście kodem. 
Zanim jednak tam dotrzemy, Fowler próbuje wytłumaczyć, po co w ogóle refaktoryzować i kiedy to robić.
I to, co najbardziej wyniosłam z tej lektury to podejście, które przewija się w niej bardzo często: mianowicie, że refaktoryzacja powinna być “częścią naturalnego flow programisty”.</p>

<p>Gdy podchodzimy do zadania, chcemy dodać nową funkcjonalność, powinniśmy móc ją wprowadzić w zastany kod w sposób łatwy i ładny. Jeśli jednak jego stan nam na to nie pozwala, może powinniśmy pokusić się o jego reorganizację, tak żebyśmy mogli później szybko i bez wyrzutów sumienia wprowadzać zmiany. Bardzo trafnie opisuje to cytat:</p>

<blockquote>"It's like I want to go 100 miles east but instead of just traipsing through the woods, I'm going to drive 20 miles north to the highway and then I'm going to go 100 miles east at three times the speed I could have if I just went straight there. When people are pushing you to just go straight there, sometimes you need to say 'Wait, I need to check the map and find the quickest route'."</blockquote>
<p>Zanim przejdziemy do przykładów, jeszcze jedna motywacja, czyli to, jak określa sam siebie Kent Beck:</p>

<blockquote>"I'm not a great programmer. I'm just a good programmer with great habits."</blockquote>

<h2 id="przykład-pierwszy">Przykład pierwszy</h2>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">solveIdealRocketEquation</span><span class="p">(</span><span class="nx">specificImpulse</span><span class="p">,</span> <span class="nx">initialMass</span><span class="p">,</span> <span class="nx">finalMass</span><span class="p">)</span> <span class="p">{</span>
	<span class="kd">const</span> <span class="nx">exhaustVelocity</span> <span class="o">=</span> <span class="nx">specificImpulse</span> <span class="o">*</span> <span class="mf">9.81</span><span class="p">;</span>
	<span class="kd">const</span> <span class="nx">massFraction</span> <span class="o">=</span> <span class="nx">initialMass</span><span class="o">/</span><span class="nx">finalMass</span><span class="p">;</span>
	<span class="k">return</span> <span class="nx">exhaustVelocity</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">massFraction</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>
<p>Refaktor powyższego przykładu rozpoczniemy od zastosowania wyodrębnienia metod (Extract Function).</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">solveIdealRocketEquation</span><span class="p">(</span><span class="nx">specificImpulse</span><span class="p">,</span> <span class="nx">initialMass</span><span class="p">,</span> <span class="nx">finalMass</span><span class="p">)</span> <span class="p">{</span>
	<span class="kd">const</span> <span class="nx">exhaustVelocity</span> <span class="o">=</span> <span class="nx">specificImpulse</span> <span class="o">*</span> <span class="mf">9.81</span><span class="p">;</span>
	<span class="kd">const</span> <span class="nx">massFraction</span> <span class="o">=</span> <span class="nx">initialMass</span><span class="o">/</span><span class="nx">finalMass</span><span class="p">;</span>
	<span class="k">return</span> <span class="nx">calculateVelocity</span><span class="p">(</span><span class="nx">exhaustVelocity</span><span class="p">,</span> <span class="nx">massFraction</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">calculateVelocity</span><span class="p">(</span><span class="nx">exhaustVelocity</span><span class="p">,</span> <span class="nx">massFraction</span><span class="p">){</span>
	<span class="k">return</span> <span class="nx">exhaustVelocity</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">massFraction</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Następnie wprowadzimy strukturę służącą do komunikacji (Introduce Parameter Object).</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">solveIdealRocketEquation</span><span class="p">(</span><span class="nx">specificImpulse</span><span class="p">,</span> <span class="nx">initialMass</span><span class="p">,</span> <span class="nx">finalMass</span><span class="p">)</span> <span class="p">{</span>
	<span class="kd">const</span> <span class="nx">exhaustVelocity</span> <span class="o">=</span> <span class="nx">specificImpulse</span> <span class="o">*</span> <span class="mf">9.81</span><span class="p">;</span>
	<span class="kd">const</span> <span class="nx">massFraction</span> <span class="o">=</span> <span class="nx">initialMass</span><span class="o">/</span><span class="nx">finalMass</span><span class="p">;</span>
	<span class="kd">const</span> <span class="nx">velocityData</span> <span class="o">=</span> <span class="p">{</span><span class="na">exhaustVelocity</span><span class="p">:</span> <span class="nx">exhaustVelocity</span><span class="p">,</span> <span class="na">massFraction</span><span class="p">:</span> <span class="nx">massFraction</span><span class="p">}</span>
	<span class="k">return</span> <span class="nx">calculateVelocity</span><span class="p">(</span><span class="nx">velocityData</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">calculateVelocity</span><span class="p">(</span><span class="nx">velocityData</span><span class="p">){</span>
	<span class="k">return</span> <span class="nx">velocityData</span><span class="p">.</span><span class="nx">exhaustVelocity</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">velocityData</span><span class="p">.</span><span class="nx">massFraction</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<p>I z tak posprzątanymi parametrami, możemy wydzielić dwie, niezależne fazy naszych obliczeń (Split Phase).</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">solveIdealRocketEquation</span><span class="p">(</span><span class="nx">specificImpulse</span><span class="p">,</span> <span class="nx">initialMass</span><span class="p">,</span> <span class="nx">finalMass</span><span class="p">)</span> <span class="p">{</span>
	<span class="kd">const</span> <span class="nx">velocityData</span> <span class="o">=</span> <span class="nx">calculateVelocityData</span><span class="p">(</span><span class="nx">specificImpulse</span><span class="p">,</span> <span class="nx">initialMass</span><span class="p">,</span> <span class="nx">finalMass</span><span class="p">)</span>
	<span class="k">return</span> <span class="nx">calculateVelocity</span><span class="p">(</span><span class="nx">velocityData</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">calculateVelocity</span><span class="p">(</span><span class="nx">velocityData</span><span class="p">){</span>
	<span class="k">return</span> <span class="nx">velocityData</span><span class="p">.</span><span class="nx">exhaustVelocity</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">velocityData</span><span class="p">.</span><span class="nx">massFraction</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">calculateVelocityData</span><span class="p">(</span><span class="nx">specificImpulse</span><span class="p">,</span> <span class="nx">initialMass</span><span class="p">,</span> <span class="nx">finalMass</span><span class="p">){</span>
	<span class="kd">const</span> <span class="nx">exhaustVelocity</span> <span class="o">=</span> <span class="nx">specificImpulse</span> <span class="o">*</span> <span class="mf">9.81</span><span class="p">;</span>
	<span class="kd">const</span> <span class="nx">massFraction</span> <span class="o">=</span> <span class="nx">initialMass</span><span class="o">/</span><span class="nx">finalMass</span><span class="p">;</span>
	<span class="k">return</span> <span class="p">{</span><span class="na">exhaustVelocity</span><span class="p">:</span> <span class="nx">exhaustVelocity</span><span class="p">,</span> <span class="na">massFraction</span><span class="p">:</span> <span class="nx">massFraction</span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="przykład-drugi">Przykład drugi</h2>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">aggregateStarsData</span><span class="p">(</span><span class="nx">stars</span><span class="p">){</span>
    <span class="kd">let</span> <span class="nx">highestTemperature</span> <span class="o">=</span> <span class="nx">stars</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">?</span> <span class="nx">stars</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">temperature</span> <span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kd">let</span> <span class="nx">totalMass</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">s</span> <span class="k">of</span> <span class="nx">stars</span><span class="p">)</span> <span class="p">{</span>
	    <span class="k">if</span> <span class="p">(</span><span class="nx">s</span><span class="p">.</span><span class="nx">temperature</span> <span class="o">&gt;</span> <span class="nx">highestTemperature</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">highestTemperature</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">temperature</span>
	    <span class="p">}</span>
	<span class="nx">totalMass</span> <span class="o">+=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">mass</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="p">{</span><span class="na">highestTemperature</span><span class="p">:</span> <span class="nx">highestTemperature</span><span class="p">,</span> <span class="na">totalMass</span><span class="p">:</span> <span class="nx">totalMass</span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<p>W powyższym przykładzie obliczamy łączną masę gwiazd oraz znajdujemy gwiazdę, której temperatura jest najwyższa. Wyliczenia te przetwarzane są w tej samej pętli, chociaż są od siebie niezależne. Minusem tego podejścia jest to, że za każdym razem, gdy będziemy chcieli taką pętlę zmodyfikować, będziemy musieli zrozumieć obie te rzeczy. Podzielmy ją więc na dwie, tak abyśmy mogli próbować zrozumieć tylko tę część, którą musimy zmodyfikować (Split Loop).</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">aggregateStarsData</span><span class="p">(</span><span class="nx">stars</span><span class="p">){</span>
    <span class="kd">let</span> <span class="nx">highestTemperature</span> <span class="o">=</span> <span class="nx">stars</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">?</span> <span class="nx">stars</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">temperature</span> <span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">s</span> <span class="k">of</span> <span class="nx">stars</span><span class="p">)</span> <span class="p">{</span>
	    <span class="k">if</span> <span class="p">(</span><span class="nx">s</span><span class="p">.</span><span class="nx">temperature</span> <span class="o">&gt;</span> <span class="nx">highestTemperature</span><span class="p">)</span> <span class="p">{</span>
		    <span class="nx">highestTemperature</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">temperature</span>
	    <span class="p">}</span>
    <span class="p">}</span>
    <span class="kd">let</span> <span class="nx">totalMass</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">s</span> <span class="k">of</span> <span class="nx">stars</span><span class="p">)</span> <span class="p">{</span>
	        <span class="nx">totalMass</span> <span class="o">+=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">mass</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="p">{</span><span class="na">highestTemperature</span><span class="p">:</span> <span class="nx">highestTemperature</span><span class="p">,</span> <span class="na">totalMass</span><span class="p">:</span> <span class="nx">totalMass</span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Następnie powydzielajmy metody (Extract Function).</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">aggregateStarsData</span><span class="p">(</span><span class="nx">stars</span><span class="p">){</span>
	<span class="k">return</span> <span class="p">{</span><span class="na">highestTemperature</span><span class="p">:</span> <span class="nx">highestTemperature</span><span class="p">(</span><span class="nx">stars</span><span class="p">),</span> <span class="na">totalMass</span><span class="p">:</span> <span class="nx">totalMass</span><span class="p">(</span><span class="nx">stars</span><span class="p">)}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">highestTemperature</span><span class="p">(</span><span class="nx">stars</span><span class="p">){</span>
	<span class="kd">let</span> <span class="nx">highestTemperature</span> <span class="o">=</span> <span class="nx">stars</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">?</span> <span class="nx">stars</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">temperature</span> <span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
	<span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">s</span> <span class="k">of</span> <span class="nx">stars</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="nx">s</span><span class="p">.</span><span class="nx">temperature</span> <span class="o">&gt;</span> <span class="nx">highestTemperature</span><span class="p">)</span> <span class="p">{</span>
			<span class="nx">highestTemperature</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">temperature</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="nx">highestTemperature</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">totalMass</span><span class="p">(</span><span class="nx">stars</span><span class="p">){</span>
	<span class="kd">let</span> <span class="nx">totalMass</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">s</span> <span class="k">of</span> <span class="nx">stars</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">totalMass</span> <span class="o">+=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">mass</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="nx">totalMass</span><span class="p">;</span>
<span class="p">}</span>

</code></pre></div></div>
<p>I użyjmy jeszcze dwóch metod refaktoryzacji: Replace Loop with Pipeline oraz Subsitute Algorithm.</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">aggregateStarsData</span><span class="p">(</span><span class="nx">stars</span><span class="p">){</span>
	<span class="k">return</span> <span class="p">{</span><span class="na">highestTemperature</span><span class="p">:</span> <span class="nx">highestTemperature</span><span class="p">(</span><span class="nx">stars</span><span class="p">),</span> <span class="na">totalMass</span><span class="p">:</span> <span class="nx">totalMass</span><span class="p">(</span><span class="nx">stars</span><span class="p">)}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">highestTemperature</span><span class="p">(</span><span class="nx">stars</span><span class="p">){</span>
    <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(...</span><span class="nx">stars</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">s</span><span class="o">=&gt;</span> <span class="nx">s</span><span class="p">.</span><span class="nx">temperature</span><span class="p">))</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">totalMass</span><span class="p">(</span><span class="nx">stars</span><span class="p">){</span>
    <span class="k">return</span> <span class="nx">stars</span><span class="p">.</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">totalMass</span><span class="p">,</span> <span class="nx">s</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">totalMass</span> <span class="o">+=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">mass</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="podsumowanie">Podsumowanie</h2>

<p>“Refactoring” Fowlera i Becka to książka, którą na pewno docenią osoby, które pracują przy dużych i długofalowych projektach. Wtedy bowiem potrzeba refaktorowania jest bezdyskusyjna, jednak jest on czasochłonny i ryzykowny. Łatwo wpaść w pułapkę, w której zmiany, które dodajemy, wprowadzają bałagan do kodu i tłumaczone są pośpiechem. Jednak czas, który zaoszczędzimy przy jej dodawaniu, zostanie zjedzony w całości, a pewnie i przekroczony, gdy kolejna osoba będzie musiała wejść w nasze klasy i zrozumieć, jak to właściwie działa.</p>

<p>Podejdźmy więc do problemu zdrowo i po prostu - zawsze zostawiajmy kod choć odrobinę lepszym, niż ten który zastaliśmy;)</p>

                            
                        </div>
                    </div>
                </div>
            </div>
            <div class="sidebar-desktop">
                
<div class="sidebar-container latest-posts">
    <div class="sidebar-title">
        Najnowsze wpisy
    </div>
    <hr class="latest-posts-separator">
    <div class="sidebar-latest-posts-container">
        <ul class="sidebar-posts"><li class="sidebar-post no-breaking-word star-icon">
                <a href="/2025/09/01/transactional-w-testach-integracyjnych-hibernate.html" lang="pl">Czy wiesz dlaczego nie powinno się stosować adnotacji @Transactional w testach integracyjnych z Hibernate?</a>
            </li><li class="sidebar-post no-breaking-word star-icon">
                <a href="/2025/07/31/angular-untracked.html" lang="pl">Czy wiesz, do czego służy untracked w Angular?</a>
            </li><li class="sidebar-post no-breaking-word star-icon">
                <a href="/2025/05/19/automatyczne-testowanie-dostepnosci.html" lang="pl">Czy wiesz, że w Jest można automatycznie testować dostępność (a11y)?</a>
            </li></ul>
    </div>
</div>

                <div class="sidebar-container offers" id="offers-sidebar">
    <div class="sidebar-title offers-title">
        Dołącz do nas
    </div>
    <hr class="offers-separator">
    <ul class="sidebar-posts offers-list">
        <li class="sidebar-post no-breaking-word">
            <a href="https://consdata.com/pl/kariera/trwajace-rekrutacje/poznan/senior-fullstack-developer-java-angular"
               lang="pl">
                <div class="job-offer">
                    <span class="job-title">SENIOR FULLSTACK DEVELOPER (JAVA + ANGULAR)</span>
                    <span class="job-description">Poznań (hybrydowo) lub zdalnie</span>
                    <span class="job-salary">
                            UoP 14 900 - 20 590 PLN brutto <br/>
                            B2B 19 680 - 27 220 PLN netto
                        </span>
                </div>
            </a>
        </li>
        <li class="sidebar-post no-breaking-word">
            <a href="https://consdata.com/pl/kariera/trwajace-rekrutacje/poznan/regular-fullstack-developer-java-angular"
               lang="pl">
                <div class="job-offer">
                    <span class="job-title">REGULAR FULLSTACK DEVELOPER (JAVA + ANGULAR)</span>
                    <span class="job-description">Poznań (hybrydowo) lub zdalnie</span>
                    <span class="job-salary">
                            UoP 11 300 - 15 900 PLN brutto <br/>
                            B2B 14 950 - 21 000 PLN netto
                        </span>
                </div>
            </a>
        </li>
        <li class="sidebar-post no-breaking-word">
            <a class="clickable-offer" href="https://www.consdata.com/pl/kariera/trwajace-rekrutacje#tag-developer">
                <div class="other-job-offers">
                    <span class="job-title">ZOBACZ WSZYSTKIE OGŁOSZENIA</span>
                </div>
            </a>
        </li>
    </ul>
</div>

                
<div class="sidebar-container newsletter-sidebar-tile">
    <div class="newsletter-tile-title-container">
        
        <h2 class="newsletter-tile-title">newsletter</h2>
        <h2 class="newsletter-tile-title">techniczny</h2>
        
    </div>
    <a href="#newsletter-form" class="sign-up-btn">Zapisz się</a>
</div>

            </div>
        </div>
        <div class="recommended-container" id="recommended-posts-container">
    <h2 class="title">
        Podobne wpisy
    </h2>
    <div id="latest-posts-container" class="latest-posts-container">



<div class="post-tile">
    <a class="small-post-image" href="/2025/09/01/transactional-w-testach-integracyjnych-hibernate.html">
        <img class="tile-image small-post-image" src="/assets/img/posts/2025-09-01-transactional-w-testach-integracyjnych-hibernate/thumbnail.webp" alt="post-image"/>
    </a>
    <div class="post-tile-content">
        <div class="badge-panel">
            <div class="badge">transactions</div>
        </div>
        <h4 class="post-title no-breaking-word">
            <a href="/2025/09/01/transactional-w-testach-integracyjnych-hibernate.html">Czy wiesz dlaczego nie powinno się stosować adnotacji @Transactional w testach integracyjnych z Hibernate?</a>
        </h4>

        <p class="post-description no-breaking-word">
            <a href="/2025/09/01/transactional-w-testach-integracyjnych-hibernate.html">
                
                
                
            </a>
        </p>

        <div class="tile-author"><a href="/authors/rmastalerek.html" class="author-name author-img">
                <img class="small-author-image" src="/assets/img/authors/rmastalerek.webp" alt="author">
            </a>
            <div class="post-info">
                <a href="/authors/rmastalerek.html" class="author-name">Robert Mastalerek</a>
                <span class="post-date">
1

wrz



2025
</span>
            </div></div>
    </div>
</div>




<div class="post-tile">
    <a class="small-post-image" href="/2025/07/31/angular-untracked.html">
        <img class="tile-image small-post-image" src="/assets/img/posts/2025-06-09-angular-untracked/thumbnail.webp" alt="post-image"/>
    </a>
    <div class="post-tile-content">
        <div class="badge-panel">
            <div class="badge">angular</div>
        </div>
        <h4 class="post-title no-breaking-word">
            <a href="/2025/07/31/angular-untracked.html">Czy wiesz, do czego służy untracked w Angular?</a>
        </h4>

        <p class="post-description no-breaking-word">
            <a href="/2025/07/31/angular-untracked.html">
                
                
                
            </a>
        </p>

        <div class="tile-author"><a href="/authors/dmejer.html" class="author-name author-img">
                <img class="small-author-image" src="/assets/img/authors/dmejer.webp" alt="author">
            </a>
            <div class="post-info">
                <a href="/authors/dmejer.html" class="author-name">Dorian Mejer</a>
                <span class="post-date">
31

lip



2025
</span>
            </div></div>
    </div>
</div>




<div class="post-tile">
    <a class="small-post-image" href="/2025/05/19/automatyczne-testowanie-dostepnosci.html">
        <img class="tile-image small-post-image" src="/assets/img/posts/2025-05-19-automatyczne-testowanie-dostepnosci/thumbnail.webp" alt="post-image"/>
    </a>
    <div class="post-tile-content">
        <div class="badge-panel">
            <div class="badge">wcag</div>
        </div>
        <h4 class="post-title no-breaking-word">
            <a href="/2025/05/19/automatyczne-testowanie-dostepnosci.html">Czy wiesz, że w Jest można automatycznie testować dostępność (a11y)?</a>
        </h4>

        <p class="post-description no-breaking-word">
            <a href="/2025/05/19/automatyczne-testowanie-dostepnosci.html">
                
                
                
            </a>
        </p>

        <div class="tile-author"><a href="/authors/wstolarski.html" class="author-name author-img">
                <img class="small-author-image" src="/assets/img/authors/wstolarski.webp" alt="author">
            </a>
            <div class="post-info">
                <a href="/authors/wstolarski.html" class="author-name">Wojciech Stolarski</a>
                <span class="post-date">
19

maj



2025
</span>
            </div></div>
    </div>
</div>
</div>
    <img id="arrow-icon" onclick="toggleRecommendation()" class="arrow rotated" src="/assets/icon/arrow.svg">
</div>

<script>

    let expended = false;
    const arrowIcon = document.getElementById("arrow-icon")

    function toggleRecommendation() {
        if (expended) {
            document.getElementById("latest-posts-container").classList.remove("hide");
            arrowIcon.classList.add("rotated");
        } else {
            document.getElementById("latest-posts-container").classList.add("hide");
            arrowIcon.classList.remove("rotated");
        }
        
        expended = !expended;
    }

</script>

        <div class="consdata-offers-mobile">
            <div class="sidebar-container offers" id="offers-sidebar">
    <div class="sidebar-title offers-title">
        Dołącz do nas
    </div>
    <hr class="offers-separator">
    <ul class="sidebar-posts offers-list">
        <li class="sidebar-post no-breaking-word">
            <a href="https://consdata.com/pl/kariera/trwajace-rekrutacje/poznan/senior-fullstack-developer-java-angular"
               lang="pl">
                <div class="job-offer">
                    <span class="job-title">SENIOR FULLSTACK DEVELOPER (JAVA + ANGULAR)</span>
                    <span class="job-description">Poznań (hybrydowo) lub zdalnie</span>
                    <span class="job-salary">
                            UoP 14 900 - 20 590 PLN brutto <br/>
                            B2B 19 680 - 27 220 PLN netto
                        </span>
                </div>
            </a>
        </li>
        <li class="sidebar-post no-breaking-word">
            <a href="https://consdata.com/pl/kariera/trwajace-rekrutacje/poznan/regular-fullstack-developer-java-angular"
               lang="pl">
                <div class="job-offer">
                    <span class="job-title">REGULAR FULLSTACK DEVELOPER (JAVA + ANGULAR)</span>
                    <span class="job-description">Poznań (hybrydowo) lub zdalnie</span>
                    <span class="job-salary">
                            UoP 11 300 - 15 900 PLN brutto <br/>
                            B2B 14 950 - 21 000 PLN netto
                        </span>
                </div>
            </a>
        </li>
        <li class="sidebar-post no-breaking-word">
            <a class="clickable-offer" href="https://www.consdata.com/pl/kariera/trwajace-rekrutacje#tag-developer">
                <div class="other-job-offers">
                    <span class="job-title">ZOBACZ WSZYSTKIE OGŁOSZENIA</span>
                </div>
            </a>
        </li>
    </ul>
</div>

        </div>
        <div class="newsletter-sub-container" id="newsletter-sub-container">
    <div class="title">
        
        <h2>Zapisz się na </h2>
        <h2 class="newsletter">newsletter </h2>
        <h2>techniczny</h2>
        
    </div>
    <div id="newsletter-form" class="newsletter-agreement-form-content">
        <form class="newsletter-form" action="https://app2.salesmanago.pl/form/e7yrrpjmxbm7bahc/contact.htm" method="post" target="_blank" onsubmit="">
            <input type="hidden" name="lang" value="pl">
            <input type="hidden" name="formId" value="fe234ba7-932a-438e-aca0-0cf324930910">
            <input type="hidden" value="true" name="sm-form-consent-id-2634-NEWSLETTER_JAVA">
            <div class="form-inputs">
                <input required placeholder="Imię *" name="sm-form-name"/>
                <input required type="email" placeholder="Adres e-mail *" name="sm-form-email"/>
            </div>
            <div class="form-checkbox-container">
                <label class="form-checkbox">
                    <input required type="checkbox" name="sm-form-consent-name-NEWSLETTER_JAVA"/>
                    <div class="form-checkbox-input"></div>
                    <span>Wysyłając formularz, wyrażasz zgodę na przetwarzanie swoich danych zgodnie z Polityką Prywatności.*</span>
                </label>
            </div>
            <button class="sign-up-btn">Zapisz się</button>
        </form>
    </div>
</div>

    </article>
</div>
<script>
    const language = 'pl';
    const jsonPath = language === 'en' ? '/en/json/posts.json' : '/json/posts.json';
    fetch(jsonPath)
        .then(response => response.json())
        .then(store => {
            function displayResults(results) {
                if (results.length > 0) {
                    const container = document.getElementById("recommended-posts");
                    results
                        .forEach(result => {
                            const item = store[result.ref];
                            if (item.lang === language) {
                                const listElement = document.createElement('li');
                                const anchor = document.createElement('a');
                                const postTitle = document.createTextNode(item.title);
                                listElement.classList.add('sidebar-post');
                                listElement.classList.add('no-breaking-word');
                                anchor.setAttribute('href', item.url);
                                anchor.setAttribute('lang', 'pl');
                                anchor.appendChild(postTitle);
                                listElement.appendChild(anchor);
                                container.appendChild(listElement);
                            }
                        });
                    if (container.children.length < 1) {
                        hideRecommendedPosts();
                    }
                } else {
                    hideRecommendedPosts();
                }

            }

            const tags = "refaktoryzacja javascript";
            const idx = lunr(function () {
                this.field('tags');

                for (let key in store) {
                    this.add({
                        'id': key,
                        'title': store[key].title,
                        'tags': store[key].tags,
                    });
                }
            });
            const results = idx.search(tags).slice(1, 4);
            displayResults(results);
        })

    function hideRecommendedPosts() {
        document.getElementById("recommended-posts-container").style.display = 'none';
    }
</script>

</main><footer>
    <div class="container">
        <a class="footer-logo" href="https://consdata.com/pl">
            <img src="/assets/img/logo.png" alt="consdata.com">
        </a>
        <div class="footer-content">
            <div class="footer-menu">
                <ul class="menu">
                    <li class="menu-item">
                        <p class="menu-title">Kontakt</p>
                        <ul class="submenu">
                            <li>
                                <a href="mailto:sales@consdata.com">sales@consdata.com</a>
                            </li>
                            <li>
                                <p>+48 61 41 51 000</p>
                            </li>
                        </ul>
                    </li>
                    <li class="menu-item">
                        <p class="menu-title">Biuro</p>
                        <ul class="submenu">
                            <li>
                                <p>K9Office<br>Krysiewicza 9/14<br>61-825 Poznań<br>Polska</p>
                            </li>
                        </ul>
                    </li>
                    <li class="menu-item">
                        <p class="menu-title">Rozwiązania</p>
                        <ul class="submenu">
                            <li>
                                <a href="https://eximee.com" target="_blank">Eximee</a>
                            </li>
                            <li>
                                <a href="https://kouncil.io" target="_blank">Kouncil</a>
                            </li>
                        </ul>
                    </li>
                    <li class="menu-item">
                        <a href="/" class="menu-title">Blog</a>
                        <a href="https://consdata.com/pl/kariera/trwajace-rekrutacje" class="menu-title"
                           target="_blank">Dołącz do nas</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="small-footer-container">
        <div class="footer-copyright">
            <span>Copyright © 2024 Consdata. All rights reserved.</span>
            <span>
                <a href="https://consdata.com/pl/polityka-prywatnosci"
                     class="privacy-policy">Privacy Policy & Cookies</a>
            </span>
        </div>
        <div class="social-footer">
            <a target="_blank" href="https://www.facebook.com/consdatacom">
                <img class="icon" src="/assets/icon/social-f.svg">
            </a>
            <a target="_blank" href="https://www.linkedin.com/company/consdata">
                <img class="icon" src="/assets/icon/social-in.svg">
            </a>
            <a target="_blank" href="https://github.com/Consdata">
                <img class="icon" src="/assets/icon/github.svg">
            </a>
            <a target="_blank" href="https://forum.eximee.com/">
                <img class="icon" src="/assets/icon/social-icon.svg">
            </a>
        </div>
    </div>
</footer>
<div class="cookie-notice" id="cookie-notice">
    <i onclick="hideConsent()" class="close-consent fa fa-times close"></i>
    <div class="cookie-container">
        <span>
            
            Chcemy używać plików cookie oraz skryptów podmiotów trzecich do polepszania funkcjonowania tej strony
        </span>
        <a id="cookie-notice-accept" class="consent-button">Zgadzam się</a>
    </div>
        <noscript><img height="1" width="1" style="display:none"
                   src="https://www.facebook.com/tr?id=300808861525851&ev=PageView&noscript=1"
    /></noscript>
</div>

<script>
    function createCookie(name, value, days) {
        let expires = "";
        if (days) {
            const date = new Date();
            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
            expires = "; expires=" + date.toUTCString();
        }
        document.cookie = name + "=" + value + expires + "; path=/";
    }

    function readCookie(name) {
        const nameEQ = name + "=";
        const ca = document.cookie.split(';');
        for (let i = 0; i < ca.length; i++) {
            let c = ca[i];
            while (c.charAt(0) === ' ') c = c.substring(1, c.length);
            if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
        }
        return null;
    }

    function eraseCookie(name) {
        createCookie(name, "", -1);
    }

    function hideConsent() {
        document.getElementById('cookie-notice').style.display = 'none';
    }

    if (readCookie('cookie-notice-dismissed') === 'true') {!function (f, b, e, v, n, t, s) {
    if (f.fbq) return;
    n = f.fbq = function () {
        n.callMethod ?
            n.callMethod.apply(n, arguments) : n.queue.push(arguments)
    };
    if (!f._fbq) f._fbq = n;
    n.push = n;
    n.loaded = !0;
    n.version = '2.0';
    n.queue = [];
    t = b.createElement(e);
    t.async = !0;
    t.src = v;
    s = b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t, s)
}(window, document, 'script',
    'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '300808861525851');
fbq('track', 'PageView');
} else {
        document.getElementById('cookie-notice').style.display = 'flex';
    }

    document.getElementById('cookie-notice-accept').addEventListener("click", function () {
        createCookie('cookie-notice-dismissed', 'true', 31);
        hideConsent();
        location.reload();
    });
</script>

</body>
</html>
